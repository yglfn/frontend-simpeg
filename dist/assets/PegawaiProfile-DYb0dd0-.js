import{J as O,a as ye,r as $e,o,b as i,e,k as h,g as I,t as n,x as ke,h as y,H as B,F as U,B as T,C,m as _,l as ce,E as H,v as S,j as je,n as re,f as xe,_ as _e,c as de,w as ge,K as be,y as De,T as Pe,p as W,u as we,L as Ke,A as Ce,q as Ie}from"./index-CerEmezX.js";const he=(A,w={day:"numeric",month:"long",year:"numeric"})=>{if(!A)return"-";try{const r=new Date(A);return isNaN(r.getTime())?A:new Intl.DateTimeFormat("id-ID",w).format(r)}catch(r){return console.warn("Error formatting date:",r),A}},Ue={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},Te={class:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50"},Ee={class:"p-6"},Ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6"},Ae={class:"text-sm font-semibold text-slate-700"},Se={class:"text-sm font-semibold text-slate-700"},Me={class:"text-sm font-semibold text-slate-700"},Ne={class:"text-sm font-semibold text-slate-700"},ze={class:"text-sm font-semibold text-slate-700"},Je={class:"text-sm font-semibold text-slate-700"},Re={key:1,class:"space-y-4 max-w-3xl"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Le=["value"],Fe=["value"],Ge=["value"],Ye={class:"flex gap-3 pt-4 border-t border-slate-100 mt-4"},qe=["disabled"],ve={__name:"DataUmum",props:{profileId:{type:[String,Number],required:!0}},setup(A){const w=A,r=_({}),j=_(!1),c=_(!1),u=ce({jenis_kelamin:"",agama_id:null,status_kawin_id:null,golongan_darah_id:null,tanggal_lahir:""}),l=_([]),b=_([]),v=_([]),P=async()=>{if(w.profileId)try{const $=await C.get(`/pegawai/profile/umum/${w.profileId}`);r.value=$.data.data||{}}catch($){console.error("Error loading Data Umum",$)}},L=async()=>{try{const[$,p,g]=await Promise.all([C.get("/reference/agama"),C.get("/reference/status-kawin"),C.get("/reference/golongan-darah")]);l.value=$.data.data||[],b.value=p.data.data||[],v.value=g.data.data||[]}catch($){console.error("Error loading references",$)}};O(()=>w.profileId,$=>{$&&P()},{immediate:!0}),ye(()=>{L()}),O(j,$=>{var p,g,f;$&&r.value&&(u.jenis_kelamin=r.value.jenis_kelamin,u.agama_id=(p=r.value.agama)==null?void 0:p.id,u.status_kawin_id=(g=r.value.status_kawin)==null?void 0:g.id,u.golongan_darah_id=(f=r.value.golongan_darah)==null?void 0:f.id,u.tanggal_lahir=r.value.tanggal_lahir?new Date(r.value.tanggal_lahir).toISOString().split("T")[0]:"")});const z=()=>{j.value=!1},F=async()=>{c.value=!0;try{await C.put(`/pegawai/profile/umum/${w.profileId}`,u),H.success("Data umum berhasil diperbarui"),await P(),j.value=!1}catch($){console.error("Error saving Data Umum",$),H.error("Gagal menyimpan data umum")}finally{c.value=!1}};return($,p)=>{var f,E,J,M,K,d,t,D,V,k;const g=$e("el-date-picker");return o(),i("div",Ue,[e("div",Te,[p[7]||(p[7]=e("div",{class:"flex items-center gap-3"},[e("span",{class:"w-1.5 h-6 bg-indigo-500 rounded-full"}),e("h3",{class:"font-bold text-slate-800"},"Informasi Umum")],-1)),j.value?I("",!0):(o(),i("button",{key:0,onClick:p[0]||(p[0]=x=>j.value=!0),class:"text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:underline"},[...p[6]||(p[6]=[e("i",{class:"fas fa-edit mr-1"},null,-1),h(" Edit ",-1)])]))]),e("div",Ee,[j.value?(o(),i("div",Re,[e("div",Be,[e("div",null,[p[14]||(p[14]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Tanggal Lahir",-1)),ke(g,{modelValue:u.tanggal_lahir,"onUpdate:modelValue":p[1]||(p[1]=x=>u.tanggal_lahir=x),type:"date",placeholder:"Pilih Tanggal",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",class:"w-full !w-full",size:"default"},null,8,["modelValue"])]),e("div",null,[p[16]||(p[16]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Jenis Kelamin",-1)),y(e("select",{"onUpdate:modelValue":p[2]||(p[2]=x=>u.jenis_kelamin=x),class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-white transition-shadow"},[...p[15]||(p[15]=[e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)])],512),[[B,u.jenis_kelamin]])]),e("div",null,[p[17]||(p[17]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Agama",-1)),y(e("select",{"onUpdate:modelValue":p[3]||(p[3]=x=>u.agama_id=x),class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-white transition-shadow"},[(o(!0),i(U,null,T(l.value,x=>(o(),i("option",{key:x.id,value:x.id},n(x.nama_agama),9,Le))),128))],512),[[B,u.agama_id]])]),e("div",null,[p[18]||(p[18]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Status Kawin",-1)),y(e("select",{"onUpdate:modelValue":p[4]||(p[4]=x=>u.status_kawin_id=x),class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-white transition-shadow"},[(o(!0),i(U,null,T(b.value,x=>(o(),i("option",{key:x.id,value:x.id},n(x.status),9,Fe))),128))],512),[[B,u.status_kawin_id]])]),e("div",null,[p[19]||(p[19]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Golongan Darah",-1)),y(e("select",{"onUpdate:modelValue":p[5]||(p[5]=x=>u.golongan_darah_id=x),class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-white transition-shadow"},[(o(!0),i(U,null,T(v.value,x=>(o(),i("option",{key:x.id,value:x.id},n(x.kode),9,Ge))),128))],512),[[B,u.golongan_darah_id]])])]),e("div",Ye,[e("button",{onClick:F,disabled:c.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2"},n(c.value?"Menyimpan...":"Simpan Perubahan"),9,qe),e("button",{onClick:z,class:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-5 py-2 rounded-lg text-sm font-medium transition-colors"},"Batal")])])):(o(),i("div",Ve,[e("div",null,[p[8]||(p[8]=e("span",{class:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-1"},"Tempat Lahir",-1)),e("span",Ae,n(((f=r.value)==null?void 0:f.tempat_lahir)||"-"),1)]),e("div",null,[p[9]||(p[9]=e("span",{class:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-1"},"Tanggal Lahir",-1)),e("span",Se,n((E=r.value)!=null&&E.tanggal_lahir?new Date(r.value.tanggal_lahir).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"),1)]),e("div",null,[p[10]||(p[10]=e("span",{class:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-1"},"Jenis Kelamin",-1)),e("span",Me,n(((J=r.value)==null?void 0:J.jenis_kelamin)==="L"?"Laki-laki":((M=r.value)==null?void 0:M.jenis_kelamin)==="P"?"Perempuan":"-"),1)]),e("div",null,[p[11]||(p[11]=e("span",{class:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-1"},"Agama",-1)),e("span",Ne,n(((d=(K=r.value)==null?void 0:K.agama)==null?void 0:d.nama)||"-"),1)]),e("div",null,[p[12]||(p[12]=e("span",{class:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-1"},"Status Pernikahan",-1)),e("span",ze,n(((D=(t=r.value)==null?void 0:t.status_kawin)==null?void 0:D.nama)||"-"),1)]),e("div",null,[p[13]||(p[13]=e("span",{class:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-1"},"Golongan Darah",-1)),e("span",Je,n(((k=(V=r.value)==null?void 0:V.golongan_darah)==null?void 0:k.nama)||"-"),1)])]))])])}}},He={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},Oe={class:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50"},We={class:"p-6"},Qe={key:0},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},Ze={class:"bg-slate-50 p-5 rounded-lg border border-slate-100"},et={class:"space-y-3"},tt={class:"block mb-0.5"},at={class:"block text-sm font-medium text-slate-700"},st={class:"block mb-0.5"},lt={class:"block text-sm font-medium text-slate-700"},ot={class:"block mb-0.5"},nt={class:"block text-sm font-medium text-slate-700"},it={class:"block mb-0.5"},dt={class:"block text-sm font-medium text-slate-700"},rt={class:"block mb-0.5"},ut={class:"block text-sm font-medium text-slate-700"},mt={class:"bg-slate-50 p-5 rounded-lg border border-slate-100"},pt={class:"space-y-3"},bt={class:"block mb-0.5"},ct={class:"block text-sm font-medium text-slate-700"},ft={class:"block mb-0.5"},gt={class:"block text-sm font-medium text-slate-700"},xt={class:"block mb-0.5"},vt={class:"block text-sm font-medium text-slate-700"},kt={class:"block mb-0.5"},_t={class:"block text-sm font-medium text-slate-700"},wt={class:"block mb-0.5"},ht={class:"block text-sm font-medium text-slate-700"},yt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},$t={class:"flex gap-3 p-4 rounded-lg bg-slate-50 border border-slate-100 items-start"},jt={class:"font-medium text-slate-800"},Dt={class:"flex gap-3 p-4 rounded-lg bg-slate-50 border border-slate-100 items-start"},Pt={class:"font-medium text-slate-800"},Kt={class:"flex gap-3 p-4 rounded-lg bg-slate-50 border border-slate-100 items-start"},Ct={class:"font-medium text-slate-800"},It={key:1,class:"space-y-8"},Ut={class:"bg-slate-50 p-5 rounded-lg border border-slate-100"},Tt={class:"space-y-4"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vt=["value"],At=["disabled"],St=["value"],Mt=["disabled"],Nt=["value"],zt=["disabled"],Jt=["value"],Rt={class:"bg-slate-50 p-5 rounded-lg border border-slate-100"},Bt={class:"flex items-center justify-between mb-4"},Lt={class:"flex items-center gap-2 cursor-pointer text-sm text-slate-600 select-none"},Ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Gt=["value"],Yt=["disabled"],qt=["value"],Ht=["disabled"],Ot=["value"],Wt=["disabled"],Qt=["value"],Xt={class:"bg-slate-50 p-5 rounded-lg border border-slate-100"},Zt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ea={class:"flex gap-3 pt-2"},ta=["disabled"],aa={__name:"AlamatPegawai",props:{profileId:{type:[String,Number],required:!0}},setup(A){const w=A,r=_({}),j=_(!1),c=_(!1),u=_(!1),l=ce({utama:{alamat:"",provinsi_id:null,kabupaten_kota_id:null,kecamatan_id:null,desa_kelurahan_id:null},domisili:{alamat:"",provinsi_id:null,kabupaten_kota_id:null,kecamatan_id:null,desa_kelurahan_id:null},email:"",telepon:"",kode_pos:""}),b=ce({provinsi:[],utama:{kabupaten:[],kecamatan:[],desa:[]},domisili:{kabupaten:[],kecamatan:[],desa:[]}}),v=async()=>{try{const d=await C.get("/reference/provinsi");b.provinsi=d.data.data||[]}catch(d){console.error("Error loading provinsi",d)}},P=async(d,t)=>{if(!t){b[d].kabupaten=[];return}try{const D=await C.get("/reference/kabupaten-kota",{params:{provinsi_id:t}});b[d].kabupaten=D.data.data||[]}catch(D){console.error("Error loading kabupaten",D),b[d].kabupaten=[]}},L=async(d,t)=>{if(!t){b[d].kecamatan=[];return}try{const D=await C.get("/reference/kecamatan",{params:{kab_kota_id:t}});b[d].kecamatan=D.data.data||[]}catch(D){console.error("Error loading kecamatan",D),b[d].kecamatan=[]}},z=async(d,t)=>{if(!t){b[d].desa=[];return}try{const D=await C.get("/reference/desa-kelurahan",{params:{kecamatan_id:t}});b[d].desa=D.data.data||[]}catch(D){console.error("Error loading desa",D),b[d].desa=[]}},F=async d=>{l[d].kabupaten_kota_id=null,l[d].kecamatan_id=null,l[d].desa_kelurahan_id=null,b[d].kecamatan=[],b[d].desa=[],await P(d,l[d].provinsi_id)},$=async d=>{l[d].kecamatan_id=null,l[d].desa_kelurahan_id=null,b[d].desa=[],await L(d,l[d].kabupaten_kota_id)},p=async d=>{l[d].desa_kelurahan_id=null,await z(d,l[d].kecamatan_id)},g=()=>{u.value&&(l.domisili.alamat=l.utama.alamat,l.domisili.provinsi_id=l.utama.provinsi_id,l.domisili.kabupaten_kota_id=l.utama.kabupaten_kota_id,l.domisili.kecamatan_id=l.utama.kecamatan_id,l.domisili.desa_kelurahan_id=l.utama.desa_kelurahan_id,b.domisili.kabupaten=[...b.utama.kabupaten],b.domisili.kecamatan=[...b.utama.kecamatan],b.domisili.desa=[...b.utama.desa])},f=async()=>{if(w.profileId)try{const d=await C.get(`/pegawai/profile/alamat/${w.profileId}`);r.value=d.data.data||{}}catch(d){console.error("Error loading Alamat",d)}},E=async()=>{const d=r.value;l.email=d.email||"",l.telepon=d.telepon||"",l.kode_pos=d.kode_pos||"",b.provinsi.length===0&&await v(),d.alamat_utama&&(l.utama.alamat=d.alamat_utama.alamat||"",l.utama.provinsi_id=d.alamat_utama.provinsi_id||null,l.utama.kabupaten_kota_id=d.alamat_utama.kabupaten_kota_id||null,l.utama.kecamatan_id=d.alamat_utama.kecamatan_id||null,l.utama.desa_kelurahan_id=d.alamat_utama.desa_kelurahan_id||null,l.utama.provinsi_id&&await P("utama",l.utama.provinsi_id),l.utama.kabupaten_kota_id&&await L("utama",l.utama.kabupaten_kota_id),l.utama.kecamatan_id&&await z("utama",l.utama.kecamatan_id)),d.alamat_domisili&&(l.domisili.alamat=d.alamat_domisili.alamat||"",l.domisili.provinsi_id=d.alamat_domisili.provinsi_id||null,l.domisili.kabupaten_kota_id=d.alamat_domisili.kabupaten_kota_id||null,l.domisili.kecamatan_id=d.alamat_domisili.kecamatan_id||null,l.domisili.desa_kelurahan_id=d.alamat_domisili.desa_kelurahan_id||null,l.domisili.provinsi_id&&await P("domisili",l.domisili.provinsi_id),l.domisili.kabupaten_kota_id&&await L("domisili",l.domisili.kabupaten_kota_id),l.domisili.kecamatan_id&&await z("domisili",l.domisili.kecamatan_id))},J=async()=>{j.value=!0,u.value=!1,await E()},M=()=>{j.value=!1,u.value=!1},K=async()=>{var D,V,k,x;if(!l.utama.desa_kelurahan_id){H.warning("Silakan pilih Desa/Kelurahan untuk Alamat KTP");return}if(!l.email||!l.telepon){H.warning("Email dan Telepon wajib diisi");return}const d=u.value?l.utama.desa_kelurahan_id:l.domisili.desa_kelurahan_id,t=u.value?l.utama.alamat:l.domisili.alamat;c.value=!0;try{await C.put(`/pegawai/profile/alamat/${w.profileId}`,{alamat_utama:{desa_kelurahan_id:l.utama.desa_kelurahan_id,alamat:l.utama.alamat||null},alamat_domisili:{desa_kelurahan_id:d||null,alamat:t||null},email:l.email,telepon:l.telepon,kode_pos:l.kode_pos}),H.success("Data alamat berhasil diperbarui"),await f(),j.value=!1,u.value=!1}catch(R){if(console.error("Error saving Alamat",R),(V=(D=R.response)==null?void 0:D.data)!=null&&V.errors){const q=R.response.data.errors,G=Object.values(q)[0];H.error(Array.isArray(G)?G[0]:G)}else H.error(((x=(k=R.response)==null?void 0:k.data)==null?void 0:x.message)||"Gagal menyimpan alamat")}finally{c.value=!1}};return O(()=>w.profileId,d=>{d&&f()},{immediate:!0}),(d,t)=>{var D,V,k,x,R,q,G,Q,X,Y,Z,ee,te,ae,ne,le,ue,me,pe,m,a,N,se;return o(),i("div",He,[e("div",Oe,[t[21]||(t[21]=e("h3",{class:"font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1.5 h-6 bg-blue-500 rounded-full"}),h(" Alamat & Kontak ")],-1)),j.value?I("",!0):(o(),i("button",{key:0,onClick:J,class:"text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline"},[...t[20]||(t[20]=[e("i",{class:"fas fa-edit mr-1"},null,-1),h(" Edit ",-1)])]))]),e("div",We,[j.value?(o(),i("div",It,[e("div",Ut,[t[49]||(t[49]=e("h4",{class:"text-sm font-bold text-slate-700 mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-id-card text-blue-500"}),h(" Alamat Sesuai KTP ")],-1)),e("div",Tt,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Jalan / Alamat",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.utama.alamat=s),type:"text",placeholder:"Contoh: Jl. Sudirman No. 1, RT 01/RW 02",class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[S,l.utama.alamat]])]),e("div",Et,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},[h("Provinsi "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.utama.provinsi_id=s),onChange:t[2]||(t[2]=s=>F("utama")),class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors"},[t[41]||(t[41]=e("option",{value:null,disabled:""},"-- Pilih Provinsi --",-1)),(o(!0),i(U,null,T(b.provinsi,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_provinsi),9,Vt))),128))],544),[[B,l.utama.provinsi_id]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},[h("Kabupaten/Kota "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.utama.kabupaten_kota_id=s),onChange:t[4]||(t[4]=s=>$("utama")),disabled:!b.utama.kabupaten.length,class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed"},[t[43]||(t[43]=e("option",{value:null,disabled:""},"-- Pilih Kabupaten/Kota --",-1)),(o(!0),i(U,null,T(b.utama.kabupaten,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_kab_kota),9,St))),128))],40,At),[[B,l.utama.kabupaten_kota_id]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},[h("Kecamatan "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.utama.kecamatan_id=s),onChange:t[6]||(t[6]=s=>p("utama")),disabled:!b.utama.kecamatan.length,class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed"},[t[45]||(t[45]=e("option",{value:null,disabled:""},"-- Pilih Kecamatan --",-1)),(o(!0),i(U,null,T(b.utama.kecamatan,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_kecamatan),9,Nt))),128))],40,Mt),[[B,l.utama.kecamatan_id]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},[h("Desa/Kelurahan "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.utama.desa_kelurahan_id=s),disabled:!b.utama.desa.length,class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed"},[t[47]||(t[47]=e("option",{value:null,disabled:""},"-- Pilih Desa/Kelurahan --",-1)),(o(!0),i(U,null,T(b.utama.desa,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_desa_kelurahan),9,Jt))),128))],8,zt),[[B,l.utama.desa_kelurahan_id]])])])])]),e("div",Rt,[e("div",Bt,[t[51]||(t[51]=e("h4",{class:"text-sm font-bold text-slate-700 flex items-center gap-2"},[e("i",{class:"fas fa-map-marked-alt text-green-500"}),h(" Alamat Domisili Saat Ini ")],-1)),e("label",Lt,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>u.value=s),onChange:g,class:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,544),[[je,u.value]]),t[50]||(t[50]=e("span",null,"Sama dengan KTP",-1))])]),e("div",{class:re([{"opacity-50 pointer-events-none":u.value},"space-y-4"])},[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Jalan / Alamat",-1)),y(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.domisili.alamat=s),type:"text",placeholder:"Contoh: Jl. Sudirman No. 1, RT 01/RW 02",class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[S,l.domisili.alamat]])]),e("div",Ft,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Provinsi",-1)),y(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.domisili.provinsi_id=s),onChange:t[11]||(t[11]=s=>F("domisili")),class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors"},[t[53]||(t[53]=e("option",{value:null,disabled:""},"-- Pilih Provinsi --",-1)),(o(!0),i(U,null,T(b.provinsi,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_provinsi),9,Gt))),128))],544),[[B,l.domisili.provinsi_id]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Kabupaten/Kota",-1)),y(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.domisili.kabupaten_kota_id=s),onChange:t[13]||(t[13]=s=>$("domisili")),disabled:!b.domisili.kabupaten.length,class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed"},[t[55]||(t[55]=e("option",{value:null,disabled:""},"-- Pilih Kabupaten/Kota --",-1)),(o(!0),i(U,null,T(b.domisili.kabupaten,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_kab_kota),9,qt))),128))],40,Yt),[[B,l.domisili.kabupaten_kota_id]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Kecamatan",-1)),y(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>l.domisili.kecamatan_id=s),onChange:t[15]||(t[15]=s=>p("domisili")),disabled:!b.domisili.kecamatan.length,class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed"},[t[57]||(t[57]=e("option",{value:null,disabled:""},"-- Pilih Kecamatan --",-1)),(o(!0),i(U,null,T(b.domisili.kecamatan,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_kecamatan),9,Ot))),128))],40,Ht),[[B,l.domisili.kecamatan_id]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Desa/Kelurahan",-1)),y(e("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>l.domisili.desa_kelurahan_id=s),disabled:!b.domisili.desa.length,class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed"},[t[59]||(t[59]=e("option",{value:null,disabled:""},"-- Pilih Desa/Kelurahan --",-1)),(o(!0),i(U,null,T(b.domisili.desa,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_desa_kelurahan),9,Qt))),128))],8,Wt),[[B,l.domisili.desa_kelurahan_id]])])])],2)]),e("div",Xt,[t[64]||(t[64]=e("h4",{class:"text-sm font-bold text-slate-700 mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-address-book text-purple-500"}),h(" Informasi Kontak ")],-1)),e("div",Zt,[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},[h("Email "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>l.email=s),type:"email",placeholder:"email@contoh.com",class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[S,l.email]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},[h("Telepon / WhatsApp "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>l.telepon=s),type:"text",placeholder:"08xxxxxxxxxx",class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[S,l.telepon]])]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5"},"Kode Pos",-1)),y(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>l.kode_pos=s),type:"text",placeholder:"12345",maxlength:"10",class:"w-full border border-slate-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[S,l.kode_pos]])])])]),e("div",ea,[e("button",{onClick:K,disabled:c.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[e("i",{class:re(c.value?"fas fa-spinner fa-spin":"fas fa-save")},null,2),h(" "+n(c.value?"Menyimpan...":"Simpan Perubahan"),1)],8,ta),e("button",{onClick:M,class:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-5 py-2.5 rounded-lg text-sm font-medium transition-colors"}," Batal ")])])):(o(),i("div",Qe,[e("div",Xe,[e("div",Ze,[t[27]||(t[27]=e("h4",{class:"text-sm font-bold text-slate-700 mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-id-card text-slate-400"}),h(" Alamat Sesuai KTP ")],-1)),e("div",et,[e("div",tt,[t[22]||(t[22]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Jalan / Alamat",-1)),e("span",at,n(((V=(D=r.value)==null?void 0:D.alamat_utama)==null?void 0:V.alamat)||"-"),1)]),e("div",st,[t[23]||(t[23]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Desa/Kel",-1)),e("span",lt,n(((x=(k=r.value)==null?void 0:k.alamat_utama)==null?void 0:x.desa_kelurahan)||"-"),1)]),e("div",ot,[t[24]||(t[24]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Kecamatan",-1)),e("span",nt,n(((q=(R=r.value)==null?void 0:R.alamat_utama)==null?void 0:q.kecamatan)||"-"),1)]),e("div",it,[t[25]||(t[25]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Kab/Kota",-1)),e("span",dt,n(((Q=(G=r.value)==null?void 0:G.alamat_utama)==null?void 0:Q.kabupaten_kota)||"-"),1)]),e("div",rt,[t[26]||(t[26]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Provinsi",-1)),e("span",ut,n(((Y=(X=r.value)==null?void 0:X.alamat_utama)==null?void 0:Y.provinsi)||"-"),1)])])]),e("div",mt,[t[33]||(t[33]=e("h4",{class:"text-sm font-bold text-slate-700 mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-map-marked-alt text-slate-400"}),h(" Alamat Domisili Saat Ini ")],-1)),e("div",pt,[e("div",bt,[t[28]||(t[28]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Jalan / Alamat",-1)),e("span",ct,n(((ee=(Z=r.value)==null?void 0:Z.alamat_domisili)==null?void 0:ee.alamat)||"-"),1)]),e("div",ft,[t[29]||(t[29]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Desa/Kel",-1)),e("span",gt,n(((ae=(te=r.value)==null?void 0:te.alamat_domisili)==null?void 0:ae.desa_kelurahan)||"-"),1)]),e("div",xt,[t[30]||(t[30]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Kecamatan",-1)),e("span",vt,n(((le=(ne=r.value)==null?void 0:ne.alamat_domisili)==null?void 0:le.kecamatan)||"-"),1)]),e("div",kt,[t[31]||(t[31]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Kab/Kota",-1)),e("span",_t,n(((me=(ue=r.value)==null?void 0:ue.alamat_domisili)==null?void 0:me.kabupaten_kota)||"-"),1)]),e("div",wt,[t[32]||(t[32]=e("span",{class:"block text-xs text-slate-400 mb-0.5"},"Provinsi",-1)),e("span",ht,n(((m=(pe=r.value)==null?void 0:pe.alamat_domisili)==null?void 0:m.provinsi)||"-"),1)])])])]),e("div",yt,[e("div",$t,[t[35]||(t[35]=e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0 bg-blue-100 text-blue-600"},[e("i",{class:"fas fa-envelope"})],-1)),e("div",null,[t[34]||(t[34]=e("p",{class:"text-xs text-slate-400"},"Email",-1)),e("p",jt,n(((a=r.value)==null?void 0:a.email)||"-"),1)])]),e("div",Dt,[t[37]||(t[37]=e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0 bg-green-100 text-green-600"},[e("i",{class:"fas fa-phone"})],-1)),e("div",null,[t[36]||(t[36]=e("p",{class:"text-xs text-slate-400"},"Telepon / WhatsApp",-1)),e("p",Pt,n(((N=r.value)==null?void 0:N.telepon)||"-"),1)])]),e("div",Kt,[t[39]||(t[39]=e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0 bg-amber-100 text-amber-600"},[e("i",{class:"fas fa-mail-bulk"})],-1)),e("div",null,[t[38]||(t[38]=e("p",{class:"text-xs text-slate-400"},"Kode Pos",-1)),e("p",Ct,n(((se=r.value)==null?void 0:se.kode_pos)||"-"),1)])])])]))])])}}},sa={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},la={class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center"},oa={class:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600"},na={class:"p-0"},ia={key:0,class:"overflow-x-auto"},da={class:"w-full text-sm text-left"},ra={class:"divide-y divide-slate-100"},ua={class:"p-4 font-medium text-slate-800"},ma={class:"p-4 text-slate-600"},pa={class:"p-4 text-slate-600"},ba={class:"p-4 text-slate-600"},ca={class:"p-4"},fa={key:1,class:"p-8 text-center text-slate-400"},ga={__name:"RiwayatJabatan",props:{profileId:{type:[String,Number],required:!0}},setup(A){const w=A,r=_([]),j=async()=>{if(w.profileId)try{const u=(await C.get(`/pegawai/profile/riwayat-jabatan/${w.profileId}`)).data.data;r.value=Array.isArray(u)?u:(u==null?void 0:u.data)||[]}catch(c){console.error("Error loading Riwayat Jabatan",c)}};return O(()=>w.profileId,c=>{c&&j()},{immediate:!0}),(c,u)=>(o(),i("div",sa,[e("div",la,[u[0]||(u[0]=e("h3",{class:"font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1.5 h-6 bg-violet-500 rounded-full"}),h(" Riwayat Jabatan ")],-1)),e("span",oa,n(r.value.length)+" Record",1)]),e("div",na,[r.value.length>0?(o(),i("div",ia,[e("table",da,[u[1]||(u[1]=e("thead",{class:"bg-slate-50 text-slate-500 font-medium"},[e("tr",null,[e("th",{class:"p-4"},"Jabatan"),e("th",{class:"p-4"},"Unit Kerja"),e("th",{class:"p-4"},"TMT"),e("th",{class:"p-4"},"SK"),e("th",{class:"p-4"},"Status")])],-1)),e("tbody",ra,[(o(!0),i(U,null,T(r.value,l=>{var b,v;return o(),i("tr",{key:l.id,class:"hover:bg-slate-50/80 transition-colors"},[e("td",ua,n(((b=l.jabatan)==null?void 0:b.nama_jabatan)||"-"),1),e("td",ma,n(((v=l.unit_kerja)==null?void 0:v.nama_unit)||"-"),1),e("td",pa,n(xe(he)(l.tmt_jabatan)),1),e("td",ba,n(l.no_sk||"-"),1),e("td",ca,[e("span",{class:re([l.is_aktif?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500","px-2 py-1 rounded text-xs font-semibold"])},n(l.is_aktif?"Aktif":"Non-Aktif"),3)])])}),128))])])])):(o(),i("div",fa," Belum ada data riwayat jabatan. "))])]))}},xa={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},va={class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center"},ka={class:"flex items-center gap-3"},_a={class:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600"},wa={class:"p-6"},ha={key:0,class:"flex justify-center py-8"},ya={key:1,class:"space-y-4"},$a={class:"w-12 h-12 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shrink-0 font-bold text-sm"},ja={class:"flex-1 min-w-0"},Da={class:"flex justify-between items-start"},Pa={class:"font-bold text-slate-800"},Ka={class:"text-xs font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded shrink-0 ml-2"},Ca={class:"text-sm text-slate-600 mt-1"},Ia={key:0,class:"text-amber-600 font-medium"},Ua={class:"text-xs text-slate-400 mt-1"},Ta={key:0,class:"text-xs text-slate-400"},Ea={key:1,class:"flex flex-wrap gap-2 mt-2"},Va=["href"],Aa={class:"max-w-[100px] truncate"},Sa={class:"flex items-start gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"},Ma=["onClick"],Na=["onClick"],za=["onClick"],Ja={key:2,class:"p-6 text-center text-slate-400"},Ra={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Ba={class:"sticky top-0 bg-white px-6 py-4 border-b border-slate-100 flex justify-between items-center z-10"},La={class:"text-lg font-bold text-slate-800"},Fa={class:"p-6 space-y-5"},Ga=["value"],Ya={key:0,class:"text-red-500 text-xs mt-1"},qa={key:0,class:"text-red-500 text-xs mt-1"},Ha={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wa=["max"],Qa={key:0,class:"text-red-500 text-xs mt-1"},Xa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Za={class:"sticky bottom-0 bg-white px-6 py-4 border-t border-slate-100 flex justify-end gap-3"},es=["disabled"],ts={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},as={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col"},ss={class:"px-6 py-4 border-b border-slate-100 flex justify-between items-center shrink-0"},ls={class:"text-xs text-slate-500 truncate max-w-[300px]"},os={class:"p-6 overflow-y-auto flex-1"},ns={class:"bg-slate-50 rounded-xl p-4 border border-slate-100 mb-6"},is={class:"space-y-3"},ds=["value"],rs={class:"flex gap-2"},us={class:"flex-1 min-w-0 cursor-pointer"},ms={class:"w-full px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm text-slate-500 hover:border-indigo-400 transition truncate flex items-center gap-2"},ps=["disabled"],bs={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},cs={key:1},fs={class:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3"},gs={key:0,class:"flex justify-center py-4"},xs={key:1,class:"space-y-2"},vs={class:"flex items-center gap-3 min-w-0"},ks={class:"min-w-0"},_s={class:"text-sm font-medium text-slate-700 truncate"},ws={class:"text-[10px] px-1.5 py-0.5 rounded bg-slate-200 text-slate-600"},hs={class:"flex items-center gap-1"},ys=["href"],$s=["onClick"],js={key:2,class:"text-center py-8 border-2 border-dashed border-slate-100 rounded-xl"},Ds={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 text-center"},Ps={class:"text-sm text-slate-500 mb-6"},Ks={class:"flex justify-center gap-3"},Cs=["disabled"],Is={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},Us={key:0,class:"fixed top-6 right-6 z-[10000] max-w-sm"},Ts={__name:"RiwayatPendidikan",props:{profileId:{type:[String,Number],required:!0}},setup(A){const w=A,r=_([]),j=_(!1),c=_([]),u=_([]),l=_(!1),b=_(!1),v=_(!1),P=_(null),L=_(!1),z=_(!1),F=_(null),$=_({}),p=_({show:!1,message:"",type:"success"}),g=_(!1),f=_(null),E=_([]),J=_(!1),M=_(!1),K=_({tipe_dokumen_id:"",file:null}),d=["SD","SMP","SMA"],t=W(()=>{const m=c.value.find(a=>a.id===Number(k.value.pendidikan_id));return(m==null?void 0:m.nama_jenjang)||""}),D=W(()=>k.value.pendidikan_id?!d.includes(t.value):!1);O(D,m=>{m||(k.value.fakultas="",k.value.program_studi="")});const V={pendidikan_id:"",nama_institusi:"",fakultas:"",program_studi:"",nomor_ijazah:"",tahun_lulus:"",kota_pendidikan:"",penandatangan_ijazah:"",keterangan:""},k=_({...V}),x=(m,a="success")=>{p.value={show:!0,message:m,type:a},setTimeout(()=>{p.value.show=!1},3e3)},R=async()=>{if(w.profileId){j.value=!0;try{const m=await C.get(`/pegawai/profile/pendidikan/${w.profileId}`);r.value=m.data.data||[]}catch(m){console.error("Error loading Riwayat Pendidikan",m)}finally{j.value=!1}}},q=async()=>{try{const m=await C.get("/reference/pendidikan");c.value=m.data.data||[]}catch(m){console.error("Error loading jenjang pendidikan",m)}},G=async()=>{try{const m=await C.get("/reference/tipe-dokumen");u.value=m.data.data||[]}catch(m){console.error("Error loading tipe dokumen",m)}},Q=()=>{v.value=!1,P.value=null,k.value={...V},$.value={},l.value=!0},X=m=>{v.value=!0,P.value=m.id,k.value={pendidikan_id:m.pendidikan_id||"",nama_institusi:m.nama_institusi||"",fakultas:m.fakultas||"",program_studi:m.program_studi||"",nomor_ijazah:m.nomor_ijazah||"",tahun_lulus:m.tahun_lulus||"",kota_pendidikan:m.kota_pendidikan||"",penandatangan_ijazah:m.penandatangan_ijazah||"",keterangan:m.keterangan||""},$.value={},l.value=!0},Y=()=>{l.value=!1},Z=async()=>{var m;L.value=!0,$.value={};try{v.value?(await C.put(`/pegawai/profile/pendidikan/${w.profileId}/${P.value}`,k.value),x("Data pendidikan berhasil diperbarui.")):(await C.post(`/pegawai/profile/pendidikan/${w.profileId}`,k.value),x("Data pendidikan berhasil ditambahkan.")),Y(),await R()}catch(a){((m=a.response)==null?void 0:m.status)===422?$.value=a.response.data.errors||{}:x("Gagal menyimpan data. Silakan coba lagi.","error"),console.error("Error saving pendidikan",a)}finally{L.value=!1}},ee=m=>{F.value=m,b.value=!0},te=async()=>{if(F.value){z.value=!0;try{await C.delete(`/pegawai/profile/pendidikan/${w.profileId}/${F.value.id}`),x("Data pendidikan berhasil dihapus."),b.value=!1,F.value=null,await R()}catch(m){x("Gagal menghapus data.","error"),console.error("Error deleting pendidikan",m)}finally{z.value=!1}}},ae=m=>{f.value=m,E.value=m.dokumen_pendidikan||[],K.value={tipe_dokumen_id:"",file:null},g.value=!0,le(m.id)},ne=()=>{g.value=!1,f.value=null},le=async m=>{J.value=!0;try{const a=await C.get(`/pegawai/pendidikan/${m}/dokumen`);E.value=a.data.data||[];const N=r.value.findIndex(se=>se.id===m);N!==-1&&(r.value[N].dokumen_pendidikan=E.value)}catch(a){console.error("Error loading docs",a)}finally{J.value=!1}},ue=m=>{const a=m.target.files[0];if(a){if(a.size>10*1024*1024){x("Ukuran file maksimal 10MB","error");return}K.value.file=a}},me=async()=>{var m,a;if(!(!f.value||!K.value.file||!K.value.tipe_dokumen_id)){M.value=!0;try{const N=new FormData;N.append("tipe_dokumen_id",K.value.tipe_dokumen_id),N.append("file",K.value.file),await C.post(`/pegawai/pendidikan/${f.value.id}/dokumen`,N,{headers:{"Content-Type":"multipart/form-data"}}),x("Dokumen berhasil diupload"),K.value={tipe_dokumen_id:"",file:null},await le(f.value.id)}catch(N){x(((a=(m=N.response)==null?void 0:m.data)==null?void 0:a.message)||"Gagal upload dokumen","error"),console.error("Upload error",N)}finally{M.value=!1}}},pe=async m=>{if(confirm("Hapus dokumen ini?"))try{await C.delete(`/pegawai/pendidikan/${m.riwayat_pendidikan_id}/dokumen/${m.id}`),x("Dokumen berhasil dihapus"),await le(m.riwayat_pendidikan_id)}catch(a){x("Gagal menghapus dokumen","error"),console.error("Delete doc error",a)}};return O(()=>w.profileId,m=>{m&&R()},{immediate:!0}),q(),G(),(m,a)=>{var N,se;return o(),i("div",xa,[e("div",va,[a[13]||(a[13]=e("h3",{class:"font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1.5 h-6 bg-amber-500 rounded-full"}),h(" Riwayat Pendidikan ")],-1)),e("div",ka,[e("span",_a,n(r.value.length)+" Record",1),e("button",{onClick:Q,class:"flex items-center gap-1.5 px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white text-xs font-semibold rounded-lg transition shadow-sm"},[...a[12]||(a[12]=[e("i",{class:"fas fa-plus text-[10px]"},null,-1),h(" Tambah ",-1)])])])]),e("div",wa,[j.value?(o(),i("div",ha,[...a[14]||(a[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-4 border-amber-500 border-t-transparent"},null,-1)])])):r.value.length>0?(o(),i("div",ya,[(o(!0),i(U,null,T(r.value,s=>{var ie,fe;return o(),i("div",{key:s.id,class:"flex gap-4 p-4 rounded-lg border border-slate-100 hover:border-amber-200 hover:bg-amber-50/30 transition-all group"},[e("div",$a,n(((ie=s.pendidikan)==null?void 0:ie.nama_jenjang)||"Pd"),1),e("div",ja,[e("div",Da,[e("h4",Pa,n(s.program_studi||s.fakultas||"-"),1),e("span",Ka,n(s.tahun_lulus||"-"),1)]),e("p",Ca,[h(n(s.nama_institusi)+" ",1),(fe=s.pendidikan)!=null&&fe.nama_jenjang?(o(),i("span",Ia,"("+n(s.pendidikan.nama_jenjang)+")",1)):I("",!0)]),e("p",Ua,"No. Ijazah: "+n(s.nomor_ijazah||"-"),1),s.kota_pendidikan?(o(),i("p",Ta,"Kota: "+n(s.kota_pendidikan),1)):I("",!0),s.dokumen_pendidikan&&s.dokumen_pendidikan.length>0?(o(),i("div",Ea,[(o(!0),i(U,null,T(s.dokumen_pendidikan,oe=>(o(),i("a",{key:oe.id,href:oe.url,target:"_blank",class:"inline-flex items-center gap-1.5 px-2 py-1 rounded bg-slate-100 text-slate-600 text-[10px] font-medium hover:bg-slate-200 transition"},[a[15]||(a[15]=e("i",{class:"fas fa-file-alt text-slate-400"},null,-1)),e("span",Aa,n(oe.nama_file),1)],8,Va))),128))])):I("",!0)]),e("div",Sa,[e("button",{onClick:oe=>X(s),class:"p-2 text-slate-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition",title:"Edit"},[...a[16]||(a[16]=[e("i",{class:"fas fa-pen text-xs"},null,-1)])],8,Ma),e("button",{onClick:oe=>ae(s),class:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition",title:"Kelola Dokumen"},[...a[17]||(a[17]=[e("i",{class:"fas fa-paperclip text-xs"},null,-1)])],8,Na),e("button",{onClick:oe=>ee(s),class:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Hapus"},[...a[18]||(a[18]=[e("i",{class:"fas fa-trash text-xs"},null,-1)])],8,za)])])}),128))])):(o(),i("div",Ja," Belum ada data riwayat pendidikan. "))]),(o(),de(be,{to:"body"},[l.value?(o(),i("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:ge(Y,["self"])},[a[30]||(a[30]=e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm"},null,-1)),e("div",Ra,[e("div",Ba,[e("h3",La,n(v.value?"Edit Pendidikan":"Tambah Pendidikan"),1),e("button",{onClick:Y,class:"p-2 hover:bg-slate-100 rounded-lg transition"},[...a[19]||(a[19]=[e("i",{class:"fas fa-times text-slate-400"},null,-1)])])]),e("div",Fa,[e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[h("Jenjang Pendidikan "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>k.value.pendidikan_id=s),class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm bg-white"},[a[20]||(a[20]=e("option",{value:""},"-- Pilih Jenjang --",-1)),(o(!0),i(U,null,T(c.value,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_jenjang),9,Ga))),128))],512),[[B,k.value.pendidikan_id]]),$.value.pendidikan_id?(o(),i("p",Ya,n($.value.pendidikan_id[0]),1)):I("",!0)]),e("div",null,[a[22]||(a[22]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[h("Nama Institusi "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>k.value.nama_institusi=s),type:"text",placeholder:"Contoh: Universitas Indonesia",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,512),[[S,k.value.nama_institusi]]),$.value.nama_institusi?(o(),i("p",qa,n($.value.nama_institusi[0]),1)):I("",!0)]),D.value?(o(),i("div",Ha,[e("div",null,[a[23]||(a[23]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Fakultas",-1)),y(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>k.value.fakultas=s),type:"text",placeholder:"Contoh: Teknik",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,512),[[S,k.value.fakultas]])]),e("div",null,[a[24]||(a[24]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Program Studi",-1)),y(e("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>k.value.program_studi=s),type:"text",placeholder:"Contoh: Informatika",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,512),[[S,k.value.program_studi]])])])):I("",!0),e("div",Oa,[e("div",null,[a[25]||(a[25]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[h("Tahun Lulus "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>k.value.tahun_lulus=s),type:"number",min:"1900",max:new Date().getFullYear(),placeholder:"2020",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,8,Wa),[[S,k.value.tahun_lulus,void 0,{number:!0}]]),$.value.tahun_lulus?(o(),i("p",Qa,n($.value.tahun_lulus[0]),1)):I("",!0)]),e("div",null,[a[26]||(a[26]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Nomor Ijazah",-1)),y(e("input",{"onUpdate:modelValue":a[5]||(a[5]=s=>k.value.nomor_ijazah=s),type:"text",placeholder:"Nomor ijazah",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,512),[[S,k.value.nomor_ijazah]])])]),e("div",Xa,[e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Kota Pendidikan",-1)),y(e("input",{"onUpdate:modelValue":a[6]||(a[6]=s=>k.value.kota_pendidikan=s),type:"text",placeholder:"Contoh: Jakarta",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,512),[[S,k.value.kota_pendidikan]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Penandatangan Ijazah",-1)),y(e("input",{"onUpdate:modelValue":a[7]||(a[7]=s=>k.value.penandatangan_ijazah=s),type:"text",placeholder:"Nama penandatangan",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm"},null,512),[[S,k.value.penandatangan_ijazah]])])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Keterangan",-1)),y(e("textarea",{"onUpdate:modelValue":a[8]||(a[8]=s=>k.value.keterangan=s),rows:"3",placeholder:"Catatan tambahan (opsional)",class:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-100 outline-none transition text-sm resize-none"},null,512),[[S,k.value.keterangan]])])]),e("div",Za,[e("button",{onClick:Y,class:"px-5 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-100 rounded-lg transition"}," Batal "),e("button",{onClick:Z,disabled:L.value,class:"px-5 py-2.5 text-sm font-semibold text-white bg-amber-500 hover:bg-amber-600 rounded-lg transition shadow-sm disabled:opacity-50 flex items-center gap-2"},[L.value?(o(),i("span",ts)):I("",!0),h(" "+n(L.value?"Menyimpan...":v.value?"Perbarui":"Simpan"),1)],8,es)])])])):I("",!0)])),(o(),de(be,{to:"body"},[g.value?(o(),i("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:ge(ne,["self"])},[a[42]||(a[42]=e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm"},null,-1)),e("div",as,[e("div",ss,[e("div",null,[a[31]||(a[31]=e("h3",{class:"text-lg font-bold text-slate-800"},"Dokumen Pendidikan",-1)),e("p",ls,n((N=f.value)==null?void 0:N.nama_institusi),1)]),e("button",{onClick:ne,class:"p-2 hover:bg-slate-100 rounded-lg transition"},[...a[32]||(a[32]=[e("i",{class:"fas fa-times text-slate-400"},null,-1)])])]),e("div",os,[e("div",ns,[a[36]||(a[36]=e("h4",{class:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3"},"Upload Dokumen Baru",-1)),e("div",is,[e("div",null,[y(e("select",{"onUpdate:modelValue":a[9]||(a[9]=s=>K.value.tipe_dokumen_id=s),class:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:border-indigo-400 outline-none"},[a[33]||(a[33]=e("option",{value:""},"-- Pilih Tipe Dokumen --",-1)),(o(!0),i(U,null,T(u.value,s=>(o(),i("option",{key:s.id,value:s.id},n(s.nama_tipe),9,ds))),128))],512),[[B,K.value.tipe_dokumen_id]])]),e("div",rs,[e("label",us,[e("div",ms,[a[34]||(a[34]=e("i",{class:"fas fa-cloud-upload-alt text-indigo-400"},null,-1)),h(" "+n(K.value.file?K.value.file.name:"Pilih File (PDF/Gambar)"),1)]),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:ue},null,32)]),e("button",{onClick:me,disabled:M.value||!K.value.file||!K.value.tipe_dokumen_id,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed"},[M.value?(o(),i("span",bs)):(o(),i("span",cs,"Upload"))],8,ps)]),a[35]||(a[35]=e("p",{class:"text-[10px] text-slate-400"},"*Maks. 10MB, Format: PDF, JPG, PNG",-1))])]),e("div",null,[e("h4",fs,"Daftar Dokumen ("+n(E.value.length)+")",1),J.value?(o(),i("div",gs,[...a[37]||(a[37]=[e("span",{class:"animate-spin rounded-full h-6 w-6 border-2 border-indigo-500 border-t-transparent"},null,-1)])])):E.value.length>0?(o(),i("div",xs,[(o(!0),i(U,null,T(E.value,s=>{var ie;return o(),i("div",{key:s.id,class:"flex items-center justify-between p-3 rounded-lg border border-slate-100 hover:bg-slate-50 transition group"},[e("div",vs,[a[38]||(a[38]=e("div",{class:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center shrink-0"},[e("i",{class:"fas fa-file-alt text-sm"})],-1)),e("div",ks,[e("p",_s,n(s.nama_file),1),e("span",ws,n(((ie=s.tipe_dokumen)==null?void 0:ie.nama_tipe)||"Dokumen"),1)])]),e("div",hs,[e("a",{href:s.url,target:"_blank",class:"p-1.5 text-slate-400 hover:text-indigo-600 rounded transition",title:"Download"},[...a[39]||(a[39]=[e("i",{class:"fas fa-download text-xs"},null,-1)])],8,ys),e("button",{onClick:fe=>pe(s),class:"p-1.5 text-slate-400 hover:text-red-600 rounded transition",title:"Hapus"},[...a[40]||(a[40]=[e("i",{class:"fas fa-trash text-xs"},null,-1)])],8,$s)])])}),128))])):(o(),i("div",js,[...a[41]||(a[41]=[e("p",{class:"text-sm text-slate-400"},"Belum ada dokumen diupload.",-1)])]))])])])])):I("",!0)])),(o(),de(be,{to:"body"},[b.value?(o(),i("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:a[11]||(a[11]=ge(s=>b.value=!1,["self"]))},[a[47]||(a[47]=e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm"},null,-1)),e("div",Ds,[a[45]||(a[45]=e("div",{class:"w-16 h-16 rounded-full bg-red-100 text-red-500 flex items-center justify-center mx-auto mb-4"},[e("i",{class:"fas fa-exclamation-triangle text-2xl"})],-1)),a[46]||(a[46]=e("h3",{class:"text-lg font-bold text-slate-800 mb-2"},"Hapus Data Pendidikan?",-1)),e("p",Ps,[a[43]||(a[43]=h("Data pendidikan di ",-1)),e("strong",null,n((se=F.value)==null?void 0:se.nama_institusi),1),a[44]||(a[44]=h(" akan dihapus permanen.",-1))]),e("div",Ks,[e("button",{onClick:a[10]||(a[10]=s=>b.value=!1),class:"px-5 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-100 rounded-lg transition"},"Batal"),e("button",{onClick:te,disabled:z.value,class:"px-5 py-2.5 text-sm font-semibold text-white bg-red-500 hover:bg-red-600 rounded-lg transition shadow-sm disabled:opacity-50 flex items-center gap-2"},[z.value?(o(),i("span",Is)):I("",!0),h(" "+n(z.value?"Menghapus...":"Ya, Hapus"),1)],8,Cs)])])])):I("",!0)])),(o(),de(be,{to:"body"},[ke(Pe,{name:"toast"},{default:De(()=>[p.value.show?(o(),i("div",Us,[e("div",{class:re(["flex items-center gap-3 px-5 py-3.5 rounded-xl shadow-lg border text-sm font-medium",p.value.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-red-50 border-red-200 text-red-700"])},[e("i",{class:re(p.value.type==="success"?"fas fa-check-circle text-emerald-500":"fas fa-exclamation-circle text-red-500")},null,2),h(" "+n(p.value.message),1)],2)])):I("",!0)]),_:1})]))])}}},Es=_e(Ts,[["__scopeId","data-v-1c2ee533"]]),Vs={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},As={class:"p-0"},Ss={class:"overflow-x-auto"},Ms={class:"w-full text-sm text-left"},Ns={class:"divide-y divide-slate-100"},zs={class:"p-4 font-medium text-slate-800"},Js={class:"p-4"},Rs={class:"bg-pink-50 text-pink-600 px-2 py-1 rounded text-xs font-bold"},Bs={class:"p-4 text-slate-600"},Ls={class:"p-4 text-slate-600"},Fs={class:"p-4 text-slate-600"},Gs={key:0},Ys={__name:"DataKeluarga",props:{profileId:{type:[String,Number],required:!0}},setup(A){const w=A,r=_([]),j=async()=>{if(w.profileId)try{const c=await C.get(`/pegawai/profile/keluarga/${w.profileId}`);r.value=c.data.data||[]}catch(c){console.error("Error loading Keluarga",c)}};return O(()=>w.profileId,c=>{c&&j()},{immediate:!0}),(c,u)=>(o(),i("div",Vs,[u[2]||(u[2]=e("div",{class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center"},[e("h3",{class:"font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1.5 h-6 bg-pink-500 rounded-full"}),h(" Data Keluarga ")])],-1)),e("div",As,[e("div",Ss,[e("table",Ms,[u[1]||(u[1]=e("thead",{class:"bg-slate-50 text-slate-500 font-medium"},[e("tr",null,[e("th",{class:"p-4"},"Nama Lengkap"),e("th",{class:"p-4"},"Hubungan"),e("th",{class:"p-4"},"L/P"),e("th",{class:"p-4"},"Tgl Lahir"),e("th",{class:"p-4"},"Pekerjaan")])],-1)),e("tbody",Ns,[(o(!0),i(U,null,T(r.value,l=>(o(),i("tr",{key:l.id,class:"hover:bg-slate-50/80 transition-colors"},[e("td",zs,n(l.nama||"-"),1),e("td",Js,[e("span",Rs,n(l.hubungan||"-"),1)]),e("td",Bs,n(l.jenis_kelamin||"-"),1),e("td",Ls,n(xe(he)(l.tanggal_lahir)),1),e("td",Fs,n(l.pekerjaan||"-"),1)]))),128)),r.value.length===0?(o(),i("tr",Gs,[...u[0]||(u[0]=[e("td",{colspan:"5",class:"p-8 text-center text-slate-400"},"Belum ada data keluarga tercatat.",-1)])])):I("",!0)])])])])]))}},qs={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},Hs={class:"p-8 max-w-2xl"},Os={class:"space-y-5"},Ws={key:0},Qs={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Xs={key:1,class:"text-red-500 text-sm italic"},Zs={class:"pt-2"},el=["disabled"],tl={__name:"KeamananAkun",setup(A){const w=we(),r=_(!1),j=_(""),c=ce({current_password:"",new_password:"",new_password_confirmation:""}),u=W(()=>(w.loginType==="nip"?!0:!!c.current_password)&&c.new_password&&c.new_password.length>=8&&c.new_password===c.new_password_confirmation),l=async()=>{var b,v;if(u.value){r.value=!0,j.value="";try{await C.post("/change-password",c),H.success("Password berhasil diperbarui"),c.current_password="",c.new_password="",c.new_password_confirmation=""}catch(P){console.error("Error changing password",P),j.value=((v=(b=P.response)==null?void 0:b.data)==null?void 0:v.message)||"Gagal mengubah password",H.error(j.value)}finally{r.value=!1}}};return(b,v)=>(o(),i("div",qs,[v[7]||(v[7]=e("div",{class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50"},[e("h3",{class:"font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1.5 h-6 bg-red-500 rounded-full"}),h(" Ubah Password ")])],-1)),e("div",Hs,[v[6]||(v[6]=e("div",{class:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6 text-sm text-amber-800 flex gap-3"},[e("i",{class:"fas fa-exclamation-triangle mt-0.5"}),e("div",null,[e("p",{class:"font-bold"},"Perhatian"),e("p",null,"Demi keamanan akun Anda, gunakan password yang kuat (minimal 8 karakter, kombinasi huruf dan angka).")])],-1)),e("div",Os,[xe(w).loginType!=="nip"?(o(),i("div",Ws,[v[3]||(v[3]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Password Saat Ini",-1)),y(e("input",{"onUpdate:modelValue":v[0]||(v[0]=P=>c.current_password=P),type:"password",class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 outline-none transition-shadow",placeholder:"********"},null,512),[[S,c.current_password]])])):I("",!0),e("div",Qs,[e("div",null,[v[4]||(v[4]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Password Baru",-1)),y(e("input",{"onUpdate:modelValue":v[1]||(v[1]=P=>c.new_password=P),type:"password",class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-shadow",placeholder:"********"},null,512),[[S,c.new_password]])]),e("div",null,[v[5]||(v[5]=e("label",{class:"block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide"},"Konfirmasi Password Baru",-1)),y(e("input",{"onUpdate:modelValue":v[2]||(v[2]=P=>c.new_password_confirmation=P),type:"password",class:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-shadow",placeholder:"********"},null,512),[[S,c.new_password_confirmation]])])]),j.value?(o(),i("p",Xs,n(j.value),1)):I("",!0),e("div",Zs,[e("button",{onClick:l,disabled:r.value||!u.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 w-full md:w-auto justify-center"},n(r.value?"Menyimpan...":"Update Password"),9,el)])])])]))}},al={class:"min-h-screen bg-slate-50 font-sans text-slate-900 pb-20"},sl={key:0,class:"flex flex-col items-center justify-center min-h-[60vh]"},ll={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 transition-all duration-500 ease-in-out"},ol={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-8 relative overflow-hidden group"},nl={class:"relative z-10 flex flex-col items-start gap-8"},il={class:"flex flex-col md:flex-row items-center gap-8 w-full border-b border-slate-100 pb-6"},dl={class:"relative shrink-0"},rl={class:"w-32 h-32 rounded-xl overflow-hidden ring-4 ring-white shadow-lg bg-slate-200 group-hover:scale-105 transition-transform duration-300"},ul=["src"],ml={class:"flex-1 text-center md:text-left"},pl={class:"flex flex-col md:flex-row md:items-center gap-3 mb-2 justify-center md:justify-start"},bl={class:"text-3xl font-bold text-slate-800 tracking-tight"},cl={class:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm"},fl={class:"space-y-1 text-slate-500 text-sm"},gl={class:"flex items-center gap-2 justify-center md:justify-start"},xl={class:"font-mono font-medium text-slate-700"},vl={class:"flex items-center gap-2 justify-center md:justify-start"},kl={class:"w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-2"},_l={class:"text-sm font-medium text-slate-700"},wl={class:"text-sm font-medium text-slate-700"},hl={class:"text-sm font-medium text-slate-700"},yl={class:"text-sm font-medium text-slate-700"},$l={class:"text-sm font-medium text-slate-700"},jl={class:"flex flex-col lg:flex-row gap-8"},Dl={class:"flex-1 min-w-0"},Pl={class:"mb-6 flex items-center justify-between"},Kl={class:"text-xl font-bold text-slate-800"},Cl={class:"text-slate-500 text-sm mt-1"},Il={key:1,class:"p-8 text-center text-slate-400 bg-white rounded-xl border border-slate-200"},Ul={__name:"PegawaiProfile",setup(A){const w=Ce(),r=Ie(),j=we(),c=_(!1),u=W(()=>j.user),l=W(()=>{var g;return(g=j.user)==null?void 0:g.profile_id}),b=_("umum"),v=_(null),P=_(null),L=W(()=>{var t,D,V;const g=v.value;let f=(g==null?void 0:g.nama_lengkap)||((t=u.value)==null?void 0:t.nama_lengkap)||((D=u.value)==null?void 0:D.name)||"";if(!f)return((V=u.value)==null?void 0:V.email)||"Nama Tidak Ditemukan";const E=(g==null?void 0:g.gelar_depan_1)||"",J=(g==null?void 0:g.gelar_depan_2)||"",M=(g==null?void 0:g.gelar_belakang)||"";let K="";E&&(K+=`${E} `),J&&(K+=`${J} `);let d=`${K}${f}`.trim();return M&&(d=`${d}, ${M}`),d}),z=W(()=>{switch(b.value){case"umum":return{label:"Data Umum",description:"Informasi dasar pegawai dan data pribadi."};case"alamat":return{label:"Alamat & Kontak",description:"Informasi tempat tinggal dan kontak."};case"riwayat-jabatan":return{label:"Riwayat Jabatan",description:"Rekam jejak jabatan pegawai."};case"pendidikan":return{label:"Riwayat Pendidikan",description:"Data pendidikan formal."};case"keluarga":return{label:"Data Keluarga",description:"Daftar anggota keluarga."};case"keamanan":return{label:"Keamanan Akun",description:"Pengaturan password."};default:return{label:"",description:""}}}),F=W(()=>{switch(b.value){case"umum":return ve;case"alamat":return aa;case"riwayat-jabatan":return ga;case"pendidikan":return Es;case"keluarga":return Ys;case"keamanan":return tl;default:return ve}}),$=g=>{b.value=g,w.query.tab!==g&&r.replace({query:{tab:g}})},p=async()=>{if(l.value)try{const[g,f]=await Promise.all([C.get(`/pegawai/profile/umum/${l.value}`),C.get(`/pegawai/profile/pekerjaan/${l.value}`)]);v.value=g.data.data,P.value=f.data.data}catch(g){console.error("Error loading header data",g)}};return O(l,g=>{g&&p()},{immediate:!0}),O(()=>w.query.tab,g=>{g&&$(g)},{immediate:!0}),(g,f)=>{var E,J,M,K,d,t,D,V,k,x,R,q,G,Q,X,Y,Z,ee,te,ae;return o(),i("div",al,[c.value?(o(),i("div",sl,[...f[0]||(f[0]=[e("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-4 border-indigo-500 border-t-transparent mb-4"},null,-1),e("p",{class:"text-slate-500 font-medium animate-pulse"},"Memuat profil pegawai...",-1)])])):(o(),i("div",ll,[e("div",ol,[f[10]||(f[10]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),e("div",nl,[e("div",il,[e("div",dl,[e("div",rl,[e("img",{src:((E=u.value)==null?void 0:E.foto_url)||"/images/default-user.png",alt:"Profile Photo",class:"w-full h-full object-cover"},null,8,ul)]),f[1]||(f[1]=e("button",{class:"absolute bottom-0 right-0 bg-indigo-600 text-white p-2 rounded-full text-xs shadow-lg hover:bg-indigo-700 transition transform hover:scale-105",title:"Ganti Foto"},[e("i",{class:"fas fa-camera"})],-1))]),e("div",ml,[e("div",pl,[e("h1",bl,n(L.value),1),e("span",cl,n(((M=(J=u.value)==null?void 0:J.role)==null?void 0:M.nama_role)||((d=(K=u.value)==null?void 0:K.role)==null?void 0:d.NAMA_ROLE)||"Pegawai"),1)]),e("div",fl,[e("p",gl,[f[2]||(f[2]=e("i",{class:"fas fa-id-badge text-indigo-400"},null,-1)),f[3]||(f[3]=h(" NIP: ",-1)),e("span",xl,n(((t=v.value)==null?void 0:t.nip)||((D=u.value)==null?void 0:D.nip)||"-"),1)]),e("p",vl,[f[4]||(f[4]=e("i",{class:"fas fa-envelope text-indigo-400"},null,-1)),h(" "+n(((V=u.value)==null?void 0:V.email)||"-"),1)])])])]),e("div",kl,[e("div",null,[f[5]||(f[5]=e("span",{class:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1"},"Jabatan",-1)),e("p",_l,n(((x=(k=P.value)==null?void 0:k.jabatan)==null?void 0:x.nama)||"-"),1)]),e("div",null,[f[6]||(f[6]=e("span",{class:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1"},"Unit Kerja",-1)),e("p",wl,n(((q=(R=P.value)==null?void 0:R.unit_kerja)==null?void 0:q.nama)||"-"),1)]),e("div",null,[f[7]||(f[7]=e("span",{class:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1"},"Jenis Pegawai",-1)),e("p",hl,n(((Q=(G=P.value)==null?void 0:G.jenis_pegawai)==null?void 0:Q.nama)||"-"),1)]),e("div",null,[f[8]||(f[8]=e("span",{class:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1"},"Status Kepegawaian",-1)),e("p",yl,n(((Y=(X=P.value)==null?void 0:X.status_kepegawaian)==null?void 0:Y.nama)||"-"),1)]),e("div",null,[f[9]||(f[9]=e("span",{class:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1"},"Golongan/Pangkat",-1)),e("p",$l,n(((ee=(Z=P.value)==null?void 0:Z.golongan)==null?void 0:ee.nama)||"-")+" / "+n(((ae=(te=P.value)==null?void 0:te.pangkat)==null?void 0:ae.nama)||"-"),1)])])])]),e("div",jl,[e("div",Dl,[e("div",Pl,[e("div",null,[e("h2",Kl,n(z.value.label),1),e("p",Cl,n(z.value.description),1)])]),l.value?(o(),de(Ke(F.value),{key:0,"profile-id":l.value},null,8,["profile-id"])):(o(),i("div",Il," Data profil tidak ditemukan. "))])])]))])}}},El=_e(Ul,[["__scopeId","data-v-d337c926"]]);export{El as default};
