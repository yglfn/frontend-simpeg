import{_ as j,q as B,u as D,a as M,s as E,o as l,b as n,e as a,d as L,n as r,t as w,x as d,y as v,g as o,T as K,m as h,p as k,z as q,F as T,k as R,r as P,A as J}from"./index-CerEmezX.js";const V={class:"navbar"},G={class:"navbar-content"},O={class:"navbar-right"},F={class:"user-avatar"},Y={key:0},z=["src"],W={class:"user-meta"},H={class:"user-name"},Q={class:"dropdown-header"},X={class:"header-avatar"},Z={class:"header-info"},ee={class:"header-name"},ae={class:"header-role"},se={__name:"Navbar",setup(U){const b=B(),C=D(),y=h(null),$=h(null),p=h(!1),f=k(()=>C.user),t=k(()=>{var s;return((s=f.value)==null?void 0:s.username)||"Pengguna"}),g=k(()=>{var s;return((s=f.value)==null?void 0:s.photo_url)||null}),A=k(()=>{var u,S,c,N;if(((u=f.value)==null?void 0:u.role_id)===1)return"Super Admin";if(((S=f.value)==null?void 0:S.role_id)===2)return"Admin";if(((c=f.value)==null?void 0:c.role_id)===3)return"Pegawai";const s=(N=f.value)==null?void 0:N.role;return typeof s=="object"&&s!==null?s.nama_role||s.kode_role||"User":s||"User"}),x=k(()=>{var u;const s=(u=f.value)==null?void 0:u.role_id;return s===1||s===2?"badge-admin":s===3?"badge-pegawai":"badge-default"}),I=k(()=>t.value.split(" ").map(u=>u.charAt(0)).join("").toUpperCase().substring(0,2)||"US"),m=s=>{s==null||s.stopPropagation(),p.value=!p.value},_=()=>b.push("/"),i=async()=>{try{await q.confirm("Apakah Anda yakin ingin mengakhiri sesi?","Konfirmasi Logout",{confirmButtonText:"Ya, Keluar",cancelButtonText:"Batal",type:"warning"}),await C.logout(),b.push("/login")}catch{}p.value=!1},e=s=>{y.value&&!y.value.contains(s.target)&&$.value&&!$.value.contains(s.target)&&(p.value=!1)};return M(()=>document.addEventListener("click",e)),E(()=>document.removeEventListener("click",e)),(s,u)=>(l(),n("header",V,[a("div",G,[a("div",{class:"navbar-left"},[a("div",{class:"brand-wrapper",onClick:_},[...u[0]||(u[0]=[L('<div class="logo-wrap" data-v-5d5d8c7c><img src="https://ridergalau.id/wp-content/uploads/2025/12/Logo-UIN-Imam-Bonjol-Padang-RiderGalau.png" alt="Logo UIN IB" class="logo-img" data-v-5d5d8c7c></div><div class="brand-text" data-v-5d5d8c7c><h1 class="app-name" data-v-5d5d8c7c>SIMPEG <span class="highlight" data-v-5d5d8c7c>UINIB</span></h1><span class="app-desc" data-v-5d5d8c7c>Sistem Kepegawaian Terintegrasi</span></div>',2)])])]),a("div",O,[a("div",{class:r(["user-trigger",{active:p.value}]),onClick:m,ref_key:"userInfoRef",ref:y},[a("div",F,[g.value?(l(),n("img",{key:1,src:g.value,alt:"User"},null,8,z)):(l(),n("span",Y,w(I.value),1))]),a("div",W,[a("span",H,w(t.value),1),a("span",{class:r(["user-role-badge",x.value])},w(A.value),3)]),a("i",{class:r(["fas fa-chevron-down dropdown-arrow",{rotated:p.value}])},null,2)],2),d(K,{name:"slide-fade"},{default:v(()=>[p.value?(l(),n("div",{key:0,class:"user-dropdown",ref_key:"userMenuRef",ref:$},[a("div",Q,[a("div",X,w(I.value),1),a("div",Z,[a("p",ee,w(t.value),1),a("p",ae,w(A.value),1)])]),a("div",{class:"dropdown-body"},[u[2]||(u[2]=a("div",{class:"dropdown-divider"},null,-1)),a("div",{class:"dropdown-item danger",onClick:i},[...u[1]||(u[1]=[a("i",{class:"fas fa-sign-out-alt"},null,-1),a("span",null,"Keluar Aplikasi",-1)])])])],512)):o("",!0)]),_:1})])])]))}},te=j(se,[["__scopeId","data-v-5d5d8c7c"]]),le={class:"sidebar-menu"},ne={class:"menu-list"},ie={key:0},oe={key:0,class:"menu-section"},ue={key:0},re={key:1,class:"menu-section"},de={key:0},me={key:0},ce={key:0},ve={key:2,class:"menu-section"},pe={key:0},fe={key:0,class:"menu-section"},ge={key:0},ke={key:0},be={key:0},_e={key:0},ye={key:0},we={key:0},$e={key:0,class:"sidebar-footer"},Ce={key:0,class:"debug-info"},Ae={key:1,class:"sidebar-footer-collapsed"},Se={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},emits:["toggle-collapse","menu-click"],setup(U,{expose:b,emit:C}){B();const y=J(),$=D(),p=U,f=C,t=k(()=>p.collapsed),g=k(()=>$.user),A=k(()=>{var i,e;if(((i=g.value)==null?void 0:i.role_id)===1||$.isAdmin)return!0;if((e=g.value)!=null&&e.role){const s=String(g.value.role).toLowerCase().trim();return["super_admin","admin","administrator"].includes(s)}return!1}),x=k(()=>!1),I=()=>{f("toggle-collapse",!p.collapsed)},m=i=>{f("menu-click",i)},_=i=>y.path.startsWith(i);return M(()=>{var i;console.log("=== SIDEBAR MOUNTED ==="),console.log("User:",g.value),console.log("Role ID:",(i=g.value)==null?void 0:i.role_id),console.log("isSuperAdmin:",A.value),console.log("========================")}),b({isSuperAdmin:A}),(i,e)=>{var u,S;const s=P("router-link");return l(),n("aside",{class:r(["sidebar",{collapsed:t.value}])},[a("div",{class:"sidebar-header"},[a("button",{class:"hamburger-toggle",onClick:I},[...e[12]||(e[12]=[a("i",{class:"fas fa-bars"},null,-1)])])]),a("nav",le,[a("ul",ne,[a("li",{class:r(["menu-item",{active:_("/dashboard")}])},[d(s,{to:"/dashboard",class:"menu-link",onClick:e[0]||(e[0]=c=>m("dashboard")),title:t.value?"Dashboard":""},{default:v(()=>[e[13]||(e[13]=a("i",{class:"fas fa-tachometer-alt"},null,-1)),t.value?o("",!0):(l(),n("span",ie,"Dashboard"))]),_:1},8,["title"])],2),A.value?(l(),n(T,{key:0},[t.value?o("",!0):(l(),n("li",oe,[...e[14]||(e[14]=[a("span",{class:"section-label"},"MANAJEMEN PEGAWAI",-1)])])),a("li",{class:r(["menu-item",{active:_("/super-admin/data-pegawai")}])},[d(s,{to:"/super-admin/data-pegawai",class:"menu-link",onClick:e[1]||(e[1]=c=>m("data-pegawai")),title:t.value?"Data Pegawai":""},{default:v(()=>[e[15]||(e[15]=a("i",{class:"fas fa-user-tie"},null,-1)),t.value?o("",!0):(l(),n("span",ue,"Data Pegawai"))]),_:1},8,["title"])],2),t.value?o("",!0):(l(),n("li",re,[...e[16]||(e[16]=[a("span",{class:"section-label"},"ORGANISASI",-1)])])),a("li",{class:r(["menu-item",{active:_("/super-admin/jabatan")}])},[d(s,{to:"/super-admin/jabatan",class:"menu-link",onClick:e[2]||(e[2]=c=>m("jabatan")),title:t.value?"Jabatan":""},{default:v(()=>[e[17]||(e[17]=a("i",{class:"fas fa-sitemap"},null,-1)),t.value?o("",!0):(l(),n("span",de,"Jabatan"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:_("/super-admin/unit-kerja")}])},[d(s,{to:"/super-admin/unit-kerja",class:"menu-link",onClick:e[3]||(e[3]=c=>m("unit-kerja")),title:t.value?"Unit Kerja":""},{default:v(()=>[e[18]||(e[18]=a("i",{class:"fas fa-building"},null,-1)),t.value?o("",!0):(l(),n("span",me,"Unit Kerja"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:_("/super-admin/tugas-tambahan")}])},[d(s,{to:"/super-admin/tugas-tambahan",class:"menu-link",onClick:e[4]||(e[4]=c=>m("tugas-tambahan")),title:t.value?"Tugas Tambahan":""},{default:v(()=>[e[19]||(e[19]=a("i",{class:"fas fa-tasks"},null,-1)),t.value?o("",!0):(l(),n("span",ce,"Tugas Tambahan"))]),_:1},8,["title"])],2),t.value?o("",!0):(l(),n("li",ve,[...e[20]||(e[20]=[a("span",{class:"section-label"},"SYSTEM",-1)])])),a("li",{class:r(["menu-item",{active:_("/super-admin/referensi")}])},[d(s,{to:"/super-admin/referensi",class:"menu-link",onClick:e[5]||(e[5]=c=>m("referensi")),title:t.value?"Tabel Referensi":""},{default:v(()=>[e[21]||(e[21]=a("i",{class:"fas fa-book"},null,-1)),t.value?o("",!0):(l(),n("span",pe,"Tabel Referensi"))]),_:1},8,["title"])],2)],64)):(l(),n(T,{key:1},[t.value?o("",!0):(l(),n("li",fe,[...e[22]||(e[22]=[a("span",{class:"section-label"},"PROFIL SAYA",-1)])])),a("li",{class:r(["menu-item",{active:_("/pegawai/profile")&&(!i.$route.query.tab||i.$route.query.tab==="umum")}])},[d(s,{to:"/pegawai/profile?tab=umum",class:"menu-link",onClick:e[6]||(e[6]=c=>m("profile-umum")),title:t.value?"Data Umum":""},{default:v(()=>[e[23]||(e[23]=a("i",{class:"fas fa-user"},null,-1)),t.value?o("",!0):(l(),n("span",ge,"Data Umum"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:i.$route.query.tab==="alamat"}])},[d(s,{to:"/pegawai/profile?tab=alamat",class:"menu-link",onClick:e[7]||(e[7]=c=>m("profile-alamat")),title:t.value?"Alamat":""},{default:v(()=>[e[24]||(e[24]=a("i",{class:"fas fa-map-marker-alt"},null,-1)),t.value?o("",!0):(l(),n("span",ke,"Alamat"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:i.$route.query.tab==="riwayat-jabatan"}])},[d(s,{to:"/pegawai/profile?tab=riwayat-jabatan",class:"menu-link",onClick:e[8]||(e[8]=c=>m("profile-riwayat-jabatan")),title:t.value?"Riwayat Jabatan":""},{default:v(()=>[e[25]||(e[25]=a("i",{class:"fas fa-sitemap"},null,-1)),t.value?o("",!0):(l(),n("span",be,"Jabatan"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:i.$route.query.tab==="pendidikan"}])},[d(s,{to:"/pegawai/profile?tab=pendidikan",class:"menu-link",onClick:e[9]||(e[9]=c=>m("profile-pendidikan")),title:t.value?"Pendidikan":""},{default:v(()=>[e[26]||(e[26]=a("i",{class:"fas fa-graduation-cap"},null,-1)),t.value?o("",!0):(l(),n("span",_e,"Pendidikan"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:i.$route.query.tab==="keluarga"}])},[d(s,{to:"/pegawai/profile?tab=keluarga",class:"menu-link",onClick:e[10]||(e[10]=c=>m("profile-keluarga")),title:t.value?"Keluarga":""},{default:v(()=>[e[27]||(e[27]=a("i",{class:"fas fa-users"},null,-1)),t.value?o("",!0):(l(),n("span",ye,"Keluarga"))]),_:1},8,["title"])],2),a("li",{class:r(["menu-item",{active:i.$route.query.tab==="keamanan"}])},[d(s,{to:"/pegawai/profile?tab=keamanan",class:"menu-link",onClick:e[11]||(e[11]=c=>m("profile-keamanan")),title:t.value?"Keamanan":""},{default:v(()=>[e[28]||(e[28]=a("i",{class:"fas fa-shield-alt"},null,-1)),t.value?o("",!0):(l(),n("span",we,"Keamanan"))]),_:1},8,["title"])],2)],64))])]),t.value?(l(),n("div",Ae,[...e[31]||(e[31]=[a("i",{class:"fas fa-circle status-active",title:"Sistem Aktif"},null,-1)])])):(l(),n("div",$e,[e[30]||(e[30]=a("div",{class:"system-info"},[a("p",{class:"system-version"},"v1.0.0"),a("p",{class:"system-status"},[a("i",{class:"fas fa-circle status-active"}),R(" Sistem Aktif ")])],-1)),x.value?(l(),n("div",Ce,[a("small",null,[R(" User ID: "+w((u=g.value)==null?void 0:u.id),1),e[29]||(e[29]=a("br",null,null,-1)),R(" Role ID: "+w((S=g.value)==null?void 0:S.role_id),1)])])):o("",!0)]))],2)}}},Ie=j(Se,[["__scopeId","data-v-5acfcd8a"]]),he={class:"min-h-screen bg-slate-50 flex flex-col"},Ue={class:"flex flex-1 pt-[90px]"},xe={class:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8"},Ne={__name:"DashboardLayout",setup(U){const b=h(!1),C=y=>{b.value=y};return(y,$)=>{const p=P("router-view");return l(),n("div",he,[d(te),a("div",Ue,[d(Ie,{collapsed:b.value,onToggleCollapse:C},null,8,["collapsed"]),a("div",{class:r(["flex-1 flex flex-col min-w-0 overflow-hidden transition-all duration-300",{"ml-[70px]":b.value,"ml-[250px]":!b.value}])},[a("main",xe,[d(p)])],2)])])}}};export{Ne as default};
