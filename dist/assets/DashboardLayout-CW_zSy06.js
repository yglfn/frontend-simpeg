import{_ as P,q as h,u as B,a as D,s as M,o as l,b as n,e as a,d as T,n as u,t as w,x as d,y as c,g as o,T as L,m as R,p as g,z as K,F as N,k as x,r as E,A as q}from"./index-DpJd74yk.js";const G={class:"navbar"},J={class:"navbar-content"},V={class:"navbar-right"},O={class:"user-avatar"},W={key:0},Y=["src"],F={class:"user-meta"},z={class:"user-name"},H={class:"dropdown-header"},Q={class:"header-avatar"},X={class:"header-info"},Z={class:"header-name"},ee={class:"header-role"},ae={__name:"Navbar",setup(j){const k=h(),A=B(),_=R(null),$=R(null),p=R(!1),b=g(()=>A.user),t=g(()=>{var s;return((s=b.value)==null?void 0:s.username)||"Pengguna"}),m=g(()=>{var s;return((s=b.value)==null?void 0:s.photo_url)||null}),C=g(()=>{var s,r,S;return((s=b.value)==null?void 0:s.role_id)===1?"Super Admin":((r=b.value)==null?void 0:r.role_id)===2?"Pegawai":((S=b.value)==null?void 0:S.role)||"User"}),U=g(()=>{var r;const s=(r=b.value)==null?void 0:r.role_id;return s===1?"badge-admin":s===2?"badge-pegawai":"badge-default"}),I=g(()=>t.value.split(" ").map(r=>r.charAt(0)).join("").toUpperCase().substring(0,2)||"US"),v=s=>{s==null||s.stopPropagation(),p.value=!p.value},y=()=>k.push("/"),i=async()=>{try{await K.confirm("Apakah Anda yakin ingin mengakhiri sesi?","Konfirmasi Logout",{confirmButtonText:"Ya, Keluar",cancelButtonText:"Batal",type:"warning"}),await A.logout(),k.push("/login")}catch{}p.value=!1},e=s=>{_.value&&!_.value.contains(s.target)&&$.value&&!$.value.contains(s.target)&&(p.value=!1)};return D(()=>document.addEventListener("click",e)),M(()=>document.removeEventListener("click",e)),(s,r)=>(l(),n("header",G,[a("div",J,[a("div",{class:"navbar-left"},[a("div",{class:"brand-wrapper",onClick:y},[...r[0]||(r[0]=[T('<div class="logo-wrap" data-v-a7b260a5><img src="https://ridergalau.id/wp-content/uploads/2025/12/Logo-UIN-Imam-Bonjol-Padang-RiderGalau.png" alt="Logo UIN IB" class="logo-img" data-v-a7b260a5></div><div class="brand-text" data-v-a7b260a5><h1 class="app-name" data-v-a7b260a5>SIMPEG <span class="highlight" data-v-a7b260a5>UINIB</span></h1><span class="app-desc" data-v-a7b260a5>Sistem Kepegawaian Terintegrasi</span></div>',2)])])]),a("div",V,[a("div",{class:u(["user-trigger",{active:p.value}]),onClick:v,ref_key:"userInfoRef",ref:_},[a("div",O,[m.value?(l(),n("img",{key:1,src:m.value,alt:"User"},null,8,Y)):(l(),n("span",W,w(I.value),1))]),a("div",F,[a("span",z,w(t.value),1),a("span",{class:u(["user-role-badge",U.value])},w(C.value),3)]),a("i",{class:u(["fas fa-chevron-down dropdown-arrow",{rotated:p.value}])},null,2)],2),d(L,{name:"slide-fade"},{default:c(()=>[p.value?(l(),n("div",{key:0,class:"user-dropdown",ref_key:"userMenuRef",ref:$},[a("div",H,[a("div",Q,w(I.value),1),a("div",X,[a("p",Z,w(t.value),1),a("p",ee,w(C.value),1)])]),a("div",{class:"dropdown-body"},[r[2]||(r[2]=a("div",{class:"dropdown-divider"},null,-1)),a("div",{class:"dropdown-item danger",onClick:i},[...r[1]||(r[1]=[a("i",{class:"fas fa-sign-out-alt"},null,-1),a("span",null,"Keluar Aplikasi",-1)])])])],512)):o("",!0)]),_:1})])])]))}},se=P(ae,[["__scopeId","data-v-a7b260a5"]]),te={class:"sidebar-menu"},le={class:"menu-list"},ne={key:0},ie={key:0,class:"menu-section"},oe={key:0},re={key:1,class:"menu-section"},ue={key:0},de={key:0},ve={key:2,class:"menu-section"},pe={key:0},ce={key:0,class:"menu-section"},me={key:0},fe={key:0},ge={key:1,class:"menu-section"},ke={key:0},be={key:0},_e={key:2,class:"menu-section"},ye={key:0},we={key:0},$e={key:0,class:"sidebar-footer"},Ae={key:0,class:"debug-info"},Ce={key:1,class:"sidebar-footer-collapsed"},Se={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},emits:["toggle-collapse","menu-click"],setup(j,{expose:k,emit:A}){h();const _=q(),$=B(),p=j,b=A,t=g(()=>p.collapsed),m=g(()=>$.user),C=g(()=>{var i,e;if(((i=m.value)==null?void 0:i.role_id)===1||$.isAdmin)return!0;if((e=m.value)!=null&&e.role){const s=String(m.value.role).toLowerCase().trim();return["super_admin","admin","administrator"].includes(s)}return!1}),U=g(()=>!1),I=()=>{b("toggle-collapse",!p.collapsed)},v=i=>{b("menu-click",i)},y=i=>_.path.startsWith(i);return D(()=>{var i;console.log("=== SIDEBAR MOUNTED ==="),console.log("User:",m.value),console.log("Role ID:",(i=m.value)==null?void 0:i.role_id),console.log("isSuperAdmin:",C.value),console.log("========================")}),k({isSuperAdmin:C}),(i,e)=>{var r,S;const s=E("router-link");return l(),n("aside",{class:u(["sidebar",{collapsed:t.value}])},[a("div",{class:"sidebar-header"},[a("button",{class:"hamburger-toggle",onClick:I},[...e[11]||(e[11]=[a("i",{class:"fas fa-bars"},null,-1)])])]),a("nav",te,[a("ul",le,[a("li",{class:u(["menu-item",{active:y("/dashboard")}])},[d(s,{to:"/dashboard",class:"menu-link",onClick:e[0]||(e[0]=f=>v("dashboard")),title:t.value?"Dashboard":""},{default:c(()=>[e[12]||(e[12]=a("i",{class:"fas fa-tachometer-alt"},null,-1)),t.value?o("",!0):(l(),n("span",ne,"Dashboard"))]),_:1},8,["title"])],2),C.value?(l(),n(N,{key:0},[t.value?o("",!0):(l(),n("li",ie,[...e[13]||(e[13]=[a("span",{class:"section-label"},"MANAJEMEN PEGAWAI",-1)])])),a("li",{class:u(["menu-item",{active:y("/super-admin/data-pegawai")}])},[d(s,{to:"/super-admin/data-pegawai",class:"menu-link",onClick:e[1]||(e[1]=f=>v("data-pegawai")),title:t.value?"Data Pegawai":""},{default:c(()=>[e[14]||(e[14]=a("i",{class:"fas fa-user-tie"},null,-1)),t.value?o("",!0):(l(),n("span",oe,"Data Pegawai"))]),_:1},8,["title"])],2),t.value?o("",!0):(l(),n("li",re,[...e[15]||(e[15]=[a("span",{class:"section-label"},"ORGANISASI",-1)])])),a("li",{class:u(["menu-item",{active:y("/super-admin/jabatan")}])},[d(s,{to:"/super-admin/jabatan",class:"menu-link",onClick:e[2]||(e[2]=f=>v("jabatan")),title:t.value?"Jabatan":""},{default:c(()=>[e[16]||(e[16]=a("i",{class:"fas fa-sitemap"},null,-1)),t.value?o("",!0):(l(),n("span",ue,"Jabatan"))]),_:1},8,["title"])],2),a("li",{class:u(["menu-item",{active:y("/super-admin/unit-kerja")}])},[d(s,{to:"/super-admin/unit-kerja",class:"menu-link",onClick:e[3]||(e[3]=f=>v("unit-kerja")),title:t.value?"Unit Kerja":""},{default:c(()=>[e[17]||(e[17]=a("i",{class:"fas fa-building"},null,-1)),t.value?o("",!0):(l(),n("span",de,"Unit Kerja"))]),_:1},8,["title"])],2),t.value?o("",!0):(l(),n("li",ve,[...e[18]||(e[18]=[a("span",{class:"section-label"},"SYSTEM",-1)])])),a("li",{class:u(["menu-item",{active:y("/super-admin/referensi")}])},[d(s,{to:"/super-admin/referensi",class:"menu-link",onClick:e[4]||(e[4]=f=>v("referensi")),title:t.value?"Tabel Referensi":""},{default:c(()=>[e[19]||(e[19]=a("i",{class:"fas fa-book"},null,-1)),t.value?o("",!0):(l(),n("span",pe,"Tabel Referensi"))]),_:1},8,["title"])],2)],64)):(l(),n(N,{key:1},[t.value?o("",!0):(l(),n("li",ce,[...e[20]||(e[20]=[a("span",{class:"section-label"},"PROFIL SAYA",-1)])])),a("li",{class:u(["menu-item",{active:y("/pegawai/profile")&&(!i.$route.query.tab||i.$route.query.tab==="umum")}])},[d(s,{to:"/pegawai/profile?tab=umum",class:"menu-link",onClick:e[5]||(e[5]=f=>v("profile-umum")),title:t.value?"Data Umum":""},{default:c(()=>[e[21]||(e[21]=a("i",{class:"fas fa-user"},null,-1)),t.value?o("",!0):(l(),n("span",me,"Data Umum"))]),_:1},8,["title"])],2),a("li",{class:u(["menu-item",{active:i.$route.query.tab==="alamat"}])},[d(s,{to:"/pegawai/profile?tab=alamat",class:"menu-link",onClick:e[6]||(e[6]=f=>v("profile-alamat")),title:t.value?"Alamat":""},{default:c(()=>[e[22]||(e[22]=a("i",{class:"fas fa-map-marker-alt"},null,-1)),t.value?o("",!0):(l(),n("span",fe,"Alamat"))]),_:1},8,["title"])],2),t.value?o("",!0):(l(),n("li",ge,[...e[23]||(e[23]=[a("span",{class:"section-label"},"KEPEGAWAIAN",-1)])])),a("li",{class:u(["menu-item",{active:i.$route.query.tab==="pekerjaan"}])},[d(s,{to:"/pegawai/profile?tab=pekerjaan",class:"menu-link",onClick:e[7]||(e[7]=f=>v("profile-pekerjaan")),title:t.value?"Pekerjaan":""},{default:c(()=>[e[24]||(e[24]=a("i",{class:"fas fa-briefcase"},null,-1)),t.value?o("",!0):(l(),n("span",ke,"Pekerjaan"))]),_:1},8,["title"])],2),a("li",{class:u(["menu-item",{active:i.$route.query.tab==="riwayat-jabatan"}])},[d(s,{to:"/pegawai/profile?tab=riwayat-jabatan",class:"menu-link",onClick:e[8]||(e[8]=f=>v("profile-riwayat-jabatan")),title:t.value?"Riwayat Jabatan":""},{default:c(()=>[e[25]||(e[25]=a("i",{class:"fas fa-sitemap"},null,-1)),t.value?o("",!0):(l(),n("span",be,"Riwayat Jabatan"))]),_:1},8,["title"])],2),t.value?o("",!0):(l(),n("li",_e,[...e[26]||(e[26]=[a("span",{class:"section-label"},"RIWAYAT",-1)])])),a("li",{class:u(["menu-item",{active:i.$route.query.tab==="pendidikan"}])},[d(s,{to:"/pegawai/profile?tab=pendidikan",class:"menu-link",onClick:e[9]||(e[9]=f=>v("profile-pendidikan")),title:t.value?"Pendidikan":""},{default:c(()=>[e[27]||(e[27]=a("i",{class:"fas fa-graduation-cap"},null,-1)),t.value?o("",!0):(l(),n("span",ye,"Pendidikan"))]),_:1},8,["title"])],2),a("li",{class:u(["menu-item",{active:i.$route.query.tab==="keluarga"}])},[d(s,{to:"/pegawai/profile?tab=keluarga",class:"menu-link",onClick:e[10]||(e[10]=f=>v("profile-keluarga")),title:t.value?"Keluarga":""},{default:c(()=>[e[28]||(e[28]=a("i",{class:"fas fa-users"},null,-1)),t.value?o("",!0):(l(),n("span",we,"Keluarga"))]),_:1},8,["title"])],2)],64))])]),t.value?(l(),n("div",Ce,[...e[31]||(e[31]=[a("i",{class:"fas fa-circle status-active",title:"Sistem Aktif"},null,-1)])])):(l(),n("div",$e,[e[30]||(e[30]=a("div",{class:"system-info"},[a("p",{class:"system-version"},"v1.0.0"),a("p",{class:"system-status"},[a("i",{class:"fas fa-circle status-active"}),x(" Sistem Aktif ")])],-1)),U.value?(l(),n("div",Ae,[a("small",null,[x(" User ID: "+w((r=m.value)==null?void 0:r.id),1),e[29]||(e[29]=a("br",null,null,-1)),x(" Role ID: "+w((S=m.value)==null?void 0:S.role_id),1)])])):o("",!0)]))],2)}}},Ie=P(Se,[["__scopeId","data-v-b400507f"]]),Re={class:"min-h-screen bg-slate-50 flex flex-col"},je={class:"flex flex-1 pt-[90px]"},Ue={class:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8"},Ne={__name:"DashboardLayout",setup(j){const k=R(!1),A=_=>{k.value=_};return(_,$)=>{const p=E("router-view");return l(),n("div",Re,[d(se),a("div",je,[d(Ie,{collapsed:k.value,onToggleCollapse:A},null,8,["collapsed"]),a("div",{class:u(["flex-1 flex flex-col min-w-0 overflow-hidden transition-all duration-300",{"ml-[70px]":k.value,"ml-[250px]":!k.value}])},[a("main",Ue,[d(p)])],2)])])}}};export{Ne as default};
