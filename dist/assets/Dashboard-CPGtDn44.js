import{_ as Y,q as tt,u as et,a as at,r as dt,o as d,b as i,e as t,k as b,t as s,n as R,g as j,x as H,y as Q,d as m,F as Z,B as q,C as U,E as st,m as g,p as P,D as X}from"./index-CerEmezX.js";const it={class:"pegawai-dashboard"},rt={class:"bg-white rounded-xl p-6 shadow-sm border border-slate-100 mb-6 flex flex-col md:flex-row justify-between items-center gap-4"},ot={class:"text-center md:text-left"},nt={class:"text-slate-500 mt-2"},ut={class:"text-slate-700"},xt={class:"flex flex-col sm:flex-row gap-3"},ft={class:"bg-slate-50 px-4 py-2 rounded-lg flex items-center gap-2 text-slate-500 text-sm border border-slate-200"},vt=["disabled"],ct={key:0,class:"py-12 text-center"},pt={key:1,class:"bg-red-50 border border-red-200 rounded-xl p-8 text-center mb-6"},bt={class:"text-red-600 mb-6"},mt={key:2,class:"dashboard-content"},gt={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 mb-6"},ht={class:"flex flex-col md:flex-row items-center md:items-start gap-6"},wt={class:"w-20 h-20 rounded-full bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg shrink-0"},yt={class:"flex-1 text-center md:text-left"},kt={class:"text-xl font-bold text-slate-800"},_t={class:"text-slate-500 mt-1"},jt={class:"flex flex-wrap gap-2 mt-3 justify-center md:justify-start"},$t={key:0,class:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100"},Dt={key:1,class:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 border border-emerald-100"},At={key:2,class:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-violet-50 text-violet-700 border border-violet-100"},Ct={key:3,class:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-amber-50 text-amber-700 border border-amber-100"},Pt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},St={class:"text-2xl font-bold text-slate-800"},It={class:"text-2xl font-bold text-slate-800"},Mt={class:"text-2xl font-bold text-slate-800"},Lt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},Tt={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},Rt={class:"space-y-3"},Jt={class:"flex justify-between py-2 border-b border-slate-50"},Kt={class:"text-sm font-medium text-slate-800"},Bt={class:"flex justify-between py-2 border-b border-slate-50"},Ut={class:"text-sm font-medium text-slate-800"},Nt={class:"flex justify-between py-2 border-b border-slate-50"},Et={class:"text-sm font-medium text-slate-800"},Gt={class:"flex justify-between py-2 border-b border-slate-50"},Vt={class:"text-sm font-medium text-slate-800"},zt={class:"flex justify-between py-2"},Ft={class:"text-sm font-medium text-slate-800"},Zt={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},qt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ot={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},Wt={class:"flex items-center justify-between mb-5"},Ht={key:0,class:"overflow-x-auto"},Qt={class:"min-w-full divide-y divide-slate-200"},Xt={class:"divide-y divide-slate-100"},Yt={class:"px-4 py-3 text-sm text-slate-800"},te={class:"px-4 py-3 text-sm text-slate-600"},ee={class:"px-4 py-3 text-sm text-slate-600"},ae={class:"px-4 py-3"},se={key:1,class:"text-center py-8 text-slate-400"},le={__name:"PegawaiDashboard",setup(lt){const O=tt(),N=et(),A=g(!1),f=g(""),E=g(new Date),o=g({}),x=g({}),$=g([]),h=g({pendidikan:0,riwayatJabatan:0,keluarga:0}),S=P(()=>{var c;return(c=N.user)==null?void 0:c.profile_id}),G=P(()=>!!o.value.nama_lengkap),W=P(()=>E.value.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),I=async()=>{var c,a,M,w,D,L,n,l,e,p,r,u,V,z;if(!S.value){f.value="Profile ID tidak ditemukan. Silakan login ulang.";return}A.value=!0,f.value="";try{const k=S.value,[K,B,T,v,C]=await Promise.allSettled([U.get(`/pegawai/profile/umum/${k}`),U.get(`/pegawai/profile/pekerjaan/${k}`),U.get(`/pegawai/profile/riwayat-jabatan/${k}`),U.get(`/pegawai/profile/pendidikan/${k}`),U.get(`/pegawai/profile/keluarga/${k}`)]);if(K.status==="fulfilled"&&((a=(c=K.value)==null?void 0:c.data)!=null&&a.data)&&(o.value={...K.value.data.data,nip:((M=N.user)==null?void 0:M.nip)||((w=N.user)==null?void 0:w.username)||"-"}),B.status==="fulfilled"&&((L=(D=B.value)==null?void 0:D.data)!=null&&L.data)&&(x.value=B.value.data.data),T.status==="fulfilled"&&((l=(n=T.value)==null?void 0:n.data)!=null&&l.data)){const _=T.value.data.data;$.value=Array.isArray(_)?_:(_==null?void 0:_.data)||[],h.value.riwayatJabatan=$.value.length}if(v.status==="fulfilled"&&((p=(e=v.value)==null?void 0:e.data)!=null&&p.data)){const _=v.value.data.data;h.value.pendidikan=Array.isArray(_)?_.length:0}if(C.status==="fulfilled"&&((u=(r=C.value)==null?void 0:r.data)!=null&&u.data)){const _=C.value.data.data;h.value.keluarga=Array.isArray(_)?_.length:0}}catch(k){console.error("Error loading pegawai dashboard:",k),f.value=((z=(V=k.response)==null?void 0:V.data)==null?void 0:z.message)||"Gagal memuat data dashboard.",st.error("Gagal memuat data dashboard")}finally{A.value=!1}},F=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch{return c}},y=c=>{O.push(c)},J=()=>{I()};return at(()=>{I(),setInterval(()=>{E.value=new Date},6e4)}),(c,a)=>{var w,D,L;const M=dt("router-link");return d(),i("div",it,[t("div",rt,[t("div",ot,[a[11]||(a[11]=t("h2",{class:"text-2xl font-bold text-slate-800 flex items-center justify-center md:justify-start gap-3"},[t("i",{class:"fas fa-id-badge text-teal-600"}),b(" Dashboard Pegawai ")],-1)),t("p",nt,[a[8]||(a[8]=b(" Selamat datang, ",-1)),t("strong",ut,s(o.value.nama_lengkap||"Pegawai"),1),a[9]||(a[9]=b("! Anda login sebagai ",-1)),a[10]||(a[10]=t("span",{class:"bg-teal-100 text-teal-700 py-1 px-3 rounded-full text-xs font-semibold"},"Pegawai",-1))]),a[12]||(a[12]=t("p",{class:"text-slate-400 text-sm mt-1"},"Panel informasi kepegawaian Anda",-1))]),t("div",xt,[t("div",ft,[a[13]||(a[13]=t("i",{class:"fas fa-calendar text-slate-400"},null,-1)),b(" "+s(W.value),1)]),t("button",{class:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:J,disabled:A.value},[t("i",{class:R(["fas fa-sync-alt",{"fa-spin":A.value}])},null,2),b(" "+s(A.value?"Memuat...":"Refresh"),1)],8,vt)])]),A.value&&!G.value?(d(),i("div",ct,[...a[14]||(a[14]=[t("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-4 border-teal-500 border-t-transparent mb-4"},null,-1),t("p",{class:"text-slate-500"},"Memuat data...",-1)])])):j("",!0),f.value?(d(),i("div",pt,[a[16]||(a[16]=t("div",{class:"text-4xl text-red-500 mb-4"},[t("i",{class:"fas fa-exclamation-triangle"})],-1)),a[17]||(a[17]=t("h3",{class:"text-lg font-semibold text-red-700 mb-2"},"Gagal Memuat Data",-1)),t("p",bt,s(f.value),1),t("button",{class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg inline-flex items-center gap-2 transition-colors",onClick:J},[...a[15]||(a[15]=[t("i",{class:"fas fa-redo"},null,-1),b(" Coba Lagi ",-1)])])])):j("",!0),!A.value&&!f.value||G.value?(d(),i("div",mt,[t("div",gt,[t("div",ht,[t("div",wt,s((o.value.nama_lengkap||"P").charAt(0).toUpperCase()),1),t("div",yt,[t("h3",kt,s(o.value.gelar_depan_1)+" "+s(o.value.gelar_depan_2)+" "+s(o.value.nama_lengkap||"-")+s(o.value.gelar_belakang?", "+o.value.gelar_belakang:""),1),t("p",_t,"NIP: "+s(o.value.nip||"-"),1),t("div",jt,[x.value.jabatan?(d(),i("span",$t,[a[18]||(a[18]=t("i",{class:"fas fa-briefcase"},null,-1)),b(" "+s(x.value.jabatan.nama),1)])):j("",!0),x.value.unit_kerja?(d(),i("span",Dt,[a[19]||(a[19]=t("i",{class:"fas fa-building"},null,-1)),b(" "+s(x.value.unit_kerja.nama),1)])):j("",!0),x.value.golongan?(d(),i("span",At,[a[20]||(a[20]=t("i",{class:"fas fa-layer-group"},null,-1)),b(" "+s(x.value.golongan.nama),1)])):j("",!0),x.value.status_kepegawaian?(d(),i("span",Ct,[a[21]||(a[21]=t("i",{class:"fas fa-id-card"},null,-1)),b(" "+s(x.value.status_kepegawaian.nama),1)])):j("",!0)])]),H(M,{to:"/pegawai/profile",class:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shrink-0"},{default:Q(()=>[...a[22]||(a[22]=[t("i",{class:"fas fa-pen"},null,-1),b(" Edit Profil ",-1)])]),_:1})])]),t("div",Pt,[t("div",{class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-md group",onClick:a[0]||(a[0]=n=>y("/pegawai/profile?tab=pendidikan"))},[a[23]||(a[23]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center text-lg group-hover:bg-blue-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-graduation-cap"})])],-1)),t("h3",St,s(h.value.pendidikan),1),a[24]||(a[24]=t("p",{class:"text-slate-500 text-xs mt-1"},"Riwayat Pendidikan",-1))]),t("div",{class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-md group",onClick:a[1]||(a[1]=n=>y("/pegawai/profile?tab=riwayat-jabatan"))},[a[25]||(a[25]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-violet-100 text-violet-600 flex items-center justify-center text-lg group-hover:bg-violet-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-sitemap"})])],-1)),t("h3",It,s(h.value.riwayatJabatan),1),a[26]||(a[26]=t("p",{class:"text-slate-500 text-xs mt-1"},"Riwayat Jabatan",-1))]),t("div",{class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-md group",onClick:a[2]||(a[2]=n=>y("/pegawai/profile?tab=keluarga"))},[a[27]||(a[27]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-pink-100 text-pink-600 flex items-center justify-center text-lg group-hover:bg-pink-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-users"})])],-1)),t("h3",Mt,s(h.value.keluarga),1),a[28]||(a[28]=t("p",{class:"text-slate-500 text-xs mt-1"},"Data Keluarga",-1))]),t("div",{class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-md group",onClick:a[3]||(a[3]=n=>y("/pegawai/profile?tab=umum"))},[...a[29]||(a[29]=[m('<div class="flex items-center justify-between mb-3" data-v-dfa899a2><div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-600 flex items-center justify-center text-lg group-hover:bg-teal-600 group-hover:text-white transition-colors" data-v-dfa899a2><i class="fas fa-user-circle" data-v-dfa899a2></i></div></div><h3 class="text-2xl font-bold text-slate-800" data-v-dfa899a2><i class="fas fa-check-circle text-green-500 text-lg" data-v-dfa899a2></i></h3><p class="text-slate-500 text-xs mt-1" data-v-dfa899a2>Profil Lengkap</p>',3)])])]),t("div",Lt,[t("div",Tt,[a[35]||(a[35]=t("div",{class:"flex items-center gap-3 mb-5"},[t("div",{class:"w-8 h-8 rounded-lg bg-teal-100 text-teal-600 flex items-center justify-center"},[t("i",{class:"fas fa-info-circle"})]),t("h3",{class:"text-base font-bold text-slate-800"},"Informasi Pribadi")],-1)),t("div",Rt,[t("div",Jt,[a[30]||(a[30]=t("span",{class:"text-sm text-slate-500"},"Tempat, Tgl Lahir",-1)),t("span",Kt,s(o.value.tempat_lahir||"-")+", "+s(F(o.value.tanggal_lahir)),1)]),t("div",Bt,[a[31]||(a[31]=t("span",{class:"text-sm text-slate-500"},"Jenis Kelamin",-1)),t("span",Ut,s(o.value.jenis_kelamin==="L"?"Laki-laki":o.value.jenis_kelamin==="P"?"Perempuan":"-"),1)]),t("div",Nt,[a[32]||(a[32]=t("span",{class:"text-sm text-slate-500"},"Agama",-1)),t("span",Et,s(((w=o.value.agama)==null?void 0:w.nama)||"-"),1)]),t("div",Gt,[a[33]||(a[33]=t("span",{class:"text-sm text-slate-500"},"Status Kawin",-1)),t("span",Vt,s(((D=o.value.status_kawin)==null?void 0:D.nama)||"-"),1)]),t("div",zt,[a[34]||(a[34]=t("span",{class:"text-sm text-slate-500"},"Pangkat",-1)),t("span",Ft,s(((L=x.value.pangkat)==null?void 0:L.nama)||"-"),1)])])]),t("div",Zt,[a[40]||(a[40]=m('<div class="flex items-center gap-3 mb-5" data-v-dfa899a2><div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center" data-v-dfa899a2><i class="fas fa-bolt" data-v-dfa899a2></i></div><div data-v-dfa899a2><h3 class="text-base font-bold text-slate-800" data-v-dfa899a2>Aksi Cepat</h3><p class="text-slate-400 text-xs" data-v-dfa899a2>Kelola data kepegawaian Anda</p></div></div>',1)),t("div",qt,[t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-3",onClick:a[4]||(a[4]=n=>y("/pegawai/profile?tab=umum"))},[...a[36]||(a[36]=[m('<div class="w-9 h-9 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center shrink-0" data-v-dfa899a2><i class="fas fa-user" data-v-dfa899a2></i></div><div data-v-dfa899a2><h4 class="font-semibold text-slate-700 text-sm" data-v-dfa899a2>Data Umum</h4><p class="text-slate-500 text-xs" data-v-dfa899a2>Lihat &amp; edit profil</p></div><i class="fas fa-chevron-right ml-auto text-slate-300 text-xs" data-v-dfa899a2></i>',3)])]),t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-3",onClick:a[5]||(a[5]=n=>y("/pegawai/profile?tab=alamat"))},[...a[37]||(a[37]=[m('<div class="w-9 h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center shrink-0" data-v-dfa899a2><i class="fas fa-map-marker-alt" data-v-dfa899a2></i></div><div data-v-dfa899a2><h4 class="font-semibold text-slate-700 text-sm" data-v-dfa899a2>Alamat</h4><p class="text-slate-500 text-xs" data-v-dfa899a2>Update alamat</p></div><i class="fas fa-chevron-right ml-auto text-slate-300 text-xs" data-v-dfa899a2></i>',3)])]),t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-3",onClick:a[6]||(a[6]=n=>y("/pegawai/profile?tab=pendidikan"))},[...a[38]||(a[38]=[m('<div class="w-9 h-9 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shrink-0" data-v-dfa899a2><i class="fas fa-graduation-cap" data-v-dfa899a2></i></div><div data-v-dfa899a2><h4 class="font-semibold text-slate-700 text-sm" data-v-dfa899a2>Pendidikan</h4><p class="text-slate-500 text-xs" data-v-dfa899a2>Riwayat pendidikan</p></div><i class="fas fa-chevron-right ml-auto text-slate-300 text-xs" data-v-dfa899a2></i>',3)])]),t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-3",onClick:a[7]||(a[7]=n=>y("/pegawai/profile?tab=keluarga"))},[...a[39]||(a[39]=[m('<div class="w-9 h-9 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center shrink-0" data-v-dfa899a2><i class="fas fa-users" data-v-dfa899a2></i></div><div data-v-dfa899a2><h4 class="font-semibold text-slate-700 text-sm" data-v-dfa899a2>Keluarga</h4><p class="text-slate-500 text-xs" data-v-dfa899a2>Data anggota keluarga</p></div><i class="fas fa-chevron-right ml-auto text-slate-300 text-xs" data-v-dfa899a2></i>',3)])])])])]),t("div",Ot,[t("div",Wt,[a[42]||(a[42]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-8 h-8 rounded-lg bg-violet-100 text-violet-600 flex items-center justify-center"},[t("i",{class:"fas fa-history"})]),t("h3",{class:"text-base font-bold text-slate-800"},"Riwayat Jabatan Terakhir")],-1)),H(M,{to:"/pegawai/profile?tab=riwayat-jabatan",class:"text-teal-600 hover:text-teal-800 text-sm flex items-center gap-1"},{default:Q(()=>[...a[41]||(a[41]=[b(" Lihat Semua ",-1),t("i",{class:"fas fa-arrow-right text-xs"},null,-1)])]),_:1})]),$.value.length>0?(d(),i("div",Ht,[t("table",Qt,[a[43]||(a[43]=t("thead",{class:"bg-slate-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase"},"Jabatan"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase"},"Unit Kerja"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase"},"TMT Jabatan"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase"},"Status")])],-1)),t("tbody",Xt,[(d(!0),i(Z,null,q($.value.slice(0,5),n=>{var l,e;return d(),i("tr",{key:n.id,class:"hover:bg-slate-50 transition-colors"},[t("td",Yt,s(((l=n.jabatan)==null?void 0:l.nama_jabatan)||"-"),1),t("td",te,s(((e=n.unit_kerja)==null?void 0:e.nama_unit)||"-"),1),t("td",ee,s(F(n.tmt_jabatan)),1),t("td",ae,[t("span",{class:R(["px-2 py-0.5 text-xs font-semibold rounded-full",n.is_aktif?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"])},s(n.is_aktif?"Aktif":"Tidak Aktif"),3)])])}),128))])])])):(d(),i("div",se,[...a[44]||(a[44]=[t("i",{class:"fas fa-inbox text-3xl mb-2"},null,-1),t("p",{class:"text-sm"},"Belum ada riwayat jabatan.",-1)])]))])])):j("",!0)])}}},de=Y(le,[["__scopeId","data-v-dfa899a2"]]),ie={key:0},re={key:1,class:"admin-dashboard"},oe={class:"bg-white rounded-xl p-6 shadow-sm border border-slate-100 mb-6 flex flex-col md:flex-row justify-between items-center gap-4"},ne={class:"flex flex-col sm:flex-row gap-3"},ue={class:"bg-slate-50 px-4 py-2 rounded-lg flex items-center gap-2 text-slate-500 text-sm border border-slate-200"},xe=["disabled"],fe={key:0,class:"py-12 text-center"},ve={key:1,class:"bg-red-50 border border-red-200 rounded-xl p-8 text-center mb-6"},ce={class:"text-red-600 mb-6"},pe={key:2,class:"dashboard-content"},be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},me={class:"text-2xl font-bold text-slate-800"},ge={class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 transition-all hover:-translate-y-1 hover:shadow-md group"},he={class:"text-2xl font-bold text-slate-800"},we={class:"text-2xl font-bold text-slate-800"},ye={class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 transition-all hover:-translate-y-1 hover:shadow-md group"},ke={class:"text-2xl font-bold text-slate-800"},_e={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},je={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},$e={key:0,class:"space-y-4"},De={class:"flex justify-between text-sm mb-1"},Ae={class:"text-slate-600"},Ce={class:"font-semibold text-slate-800"},Pe={class:"w-full bg-slate-100 rounded-full h-2.5"},Se={class:"text-xs text-slate-400 mt-1"},Ie={key:1,class:"text-center py-6 text-slate-400"},Me={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},Le={key:0,class:"space-y-3 max-h-80 overflow-y-auto pr-2"},Te={class:"flex-1 min-w-0"},Re={class:"flex justify-between text-sm mb-1"},Je=["title"],Ke={class:"font-semibold text-slate-800 shrink-0 ml-2"},Be={class:"w-full bg-slate-100 rounded-full h-2"},Ue={key:1,class:"text-center py-6 text-slate-400"},Ne={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ee={class:"lg:col-span-2 space-y-6"},Ge={key:0,class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},Ve={class:"grid grid-cols-3 gap-4"},ze={class:"bg-sky-50 rounded-lg p-4 text-center border border-sky-100"},Fe={class:"text-2xl font-bold text-sky-700"},Ze={class:"bg-green-50 rounded-lg p-4 text-center border border-green-100"},qe={class:"text-2xl font-bold text-green-700"},Oe={class:"bg-red-50 rounded-lg p-4 text-center border border-red-100"},We={class:"text-2xl font-bold text-red-600"},He={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},Qe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Xe={class:"bg-white rounded-xl shadow-sm border border-slate-100 p-6"},Ye={class:"flex justify-between items-center mb-6"},ta=["disabled"],ea={key:0,class:"space-y-4 max-h-96 overflow-y-auto pr-1"},aa={class:"text-sm font-semibold text-slate-700"},sa={class:"text-xs text-slate-500 mt-1"},la={class:"text-xs text-slate-400 mt-2 block"},da={key:1,class:"text-center py-8 text-slate-400"},ia={__name:"Dashboard",setup(lt){const O=tt(),N=et(),A=P(()=>{var e;return((e=N.user)==null?void 0:e.role_id)===3}),f=g(!1),E=g(new Date),o=g(""),x=g({total_pegawai:0,pegawai_aktif:0,total_unit_kerja:0,total_riwayat:0}),$=g({total:0,aktif:0,non_aktif:0}),h=g({}),S=g([]),G=P(()=>x.value.total_pegawai>0||x.value.total_unit_kerja>0),W=P(()=>E.value.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),I=P(()=>{const l=h.value.jabatan_aktif_per_unit_kerja||[];return l.length?l.sort((e,p)=>p.value-e.value).slice(0,10).map(e=>({nama_unit:e.label,total_pegawai:e.value})):[]}),F=P(()=>I.value.length?Math.max(...I.value.map(l=>l.total_pegawai),1):1),y=async()=>{var l,e,p,r,u,V,z,k,K,B;try{f.value=!0,o.value="";const v=(await U.get("/super-admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;x.value={total_pegawai:((l=v.summary)==null?void 0:l.total_pegawai)||0,pegawai_aktif:((e=v.summary)==null?void 0:e.pegawai_aktif)||0,total_unit_kerja:((p=v.unit_kerja)==null?void 0:p.total_unit_kerja)||0,total_riwayat:(((r=v.summary)==null?void 0:r.total_riwayat_jabatan)||0)+(((u=v.summary)==null?void 0:u.total_riwayat_pendidikan)||0)},$.value={total:((V=v.admin)==null?void 0:V.total)||0,aktif:((z=v.admin)==null?void 0:z.aktif)||0,non_aktif:((k=v.admin)==null?void 0:k.non_aktif)||0},h.value=v.chart_data||{},v.aktivitas_terbaru&&Array.isArray(v.aktivitas_terbaru)?S.value=v.aktivitas_terbaru.map(C=>({icon:`fa-${C.icon}`,title:C.title,description:C.description,time:a(C.created_at),status:M(C.type)})):S.value=[]}catch(T){console.error("Error loading dashboard:",T),o.value=((B=(K=T.response)==null?void 0:K.data)==null?void 0:B.message)||"Gagal terhubung ke server",st.error("Gagal memuat data dashboard")}finally{f.value=!1}},J=(l,e)=>!e||e===0?0:Math.round(l/e*100),c=l=>!l||!Array.isArray(l)?0:l.reduce((e,p)=>e+(p.value||0),0),a=l=>{if(!l)return"";let e=l.replace(" ","T");!/[Z+\-]\d{2}/.test(e)&&e.endsWith("Z");const p=new Date(e),u=Math.floor((new Date-p)/1e3);return u<0||u<60?"Baru saja":u<3600?`${Math.floor(u/60)} menit yang lalu`:u<86400?`${Math.floor(u/3600)} jam yang lalu`:u<604800?`${Math.floor(u/86400)} hari yang lalu`:p.toLocaleDateString("id-ID")},M=l=>l==="pegawai_baru"?"success":l==="riwayat_jabatan_baru"?"warning":"info",w=l=>{O.push(`/${l}`)},D=l=>l==null?"0":new Intl.NumberFormat("id-ID").format(l),L=l=>{switch(l){case"success":return"bg-green-100 text-green-600";case"warning":return"bg-orange-100 text-orange-600";case"error":return"bg-red-100 text-red-600";default:return"bg-blue-100 text-blue-600"}},n=()=>{y()};return at(()=>{y(),setInterval(()=>{E.value=new Date},6e4)}),(l,e)=>{var p;return A.value?(d(),i("div",ie,[H(de)])):(d(),i("div",re,[t("div",oe,[e[7]||(e[7]=m('<div class="text-center md:text-left" data-v-8d1d0638><h2 class="text-2xl font-bold text-slate-800 flex items-center justify-center md:justify-start gap-3" data-v-8d1d0638><i class="fas fa-user-shield text-blue-600" data-v-8d1d0638></i> Dashboard Super Admin </h2><p class="text-slate-500 mt-2" data-v-8d1d0638> Selamat datang, Anda login sebagai <span class="bg-blue-100 text-blue-700 py-1 px-3 rounded-full text-xs font-semibold" data-v-8d1d0638>Super Admin</span></p><p class="text-slate-400 text-sm mt-1" data-v-8d1d0638>Panel kontrol utama sistem kepegawaian</p></div>',1)),t("div",ne,[t("div",ue,[e[6]||(e[6]=t("i",{class:"fas fa-calendar text-slate-400"},null,-1)),b(" "+s(W.value),1)]),t("button",{class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:n,disabled:f.value},[t("i",{class:R(["fas fa-sync-alt",{"fa-spin":f.value}])},null,2),b(" "+s(f.value?"Memuat...":"Refresh"),1)],8,xe)])]),f.value&&!G.value?(d(),i("div",fe,[...e[8]||(e[8]=[t("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent mb-4"},null,-1),t("p",{class:"text-slate-500"},"Memuat data dashboard...",-1)])])):j("",!0),o.value?(d(),i("div",ve,[e[10]||(e[10]=t("div",{class:"text-4xl text-red-500 mb-4"},[t("i",{class:"fas fa-exclamation-triangle"})],-1)),e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-red-700 mb-2"},"Gagal Memuat Data",-1)),t("p",ce,s(o.value),1),t("button",{class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg inline-flex items-center gap-2 transition-colors",onClick:n},[...e[9]||(e[9]=[t("i",{class:"fas fa-redo"},null,-1),b(" Coba Lagi ",-1)])])])):j("",!0),!f.value&&!o.value||G.value?(d(),i("div",pe,[t("div",be,[t("div",{class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-md group",onClick:e[0]||(e[0]=r=>w("super-admin/data-pegawai"))},[e[12]||(e[12]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center text-lg group-hover:bg-blue-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-users"})])],-1)),t("h3",me,s(D(x.value.total_pegawai)),1),e[13]||(e[13]=t("p",{class:"text-slate-500 text-xs mt-1"},"Total Pegawai",-1))]),t("div",ge,[e[14]||(e[14]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-green-100 text-green-600 flex items-center justify-center text-lg group-hover:bg-green-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-user-check"})])],-1)),t("h3",he,s(D(x.value.pegawai_aktif)),1),e[15]||(e[15]=t("p",{class:"text-slate-500 text-xs mt-1"},"Pegawai Aktif",-1))]),t("div",{class:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-md group",onClick:e[1]||(e[1]=r=>w("super-admin/unit-kerja"))},[e[16]||(e[16]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center text-lg group-hover:bg-emerald-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-building"})])],-1)),t("h3",we,s(D(x.value.total_unit_kerja)),1),e[17]||(e[17]=t("p",{class:"text-slate-500 text-xs mt-1"},"Unit Kerja",-1))]),t("div",ye,[e[18]||(e[18]=t("div",{class:"flex items-center justify-between mb-3"},[t("div",{class:"w-10 h-10 rounded-xl bg-violet-100 text-violet-600 flex items-center justify-center text-lg group-hover:bg-violet-600 group-hover:text-white transition-colors"},[t("i",{class:"fas fa-file-alt"})])],-1)),t("h3",ke,s(D(x.value.total_riwayat)),1),e[19]||(e[19]=t("p",{class:"text-slate-500 text-xs mt-1"},"Total Riwayat",-1))])]),t("div",_e,[t("div",je,[e[21]||(e[21]=t("div",{class:"flex items-center gap-3 mb-5"},[t("div",{class:"w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center"},[t("i",{class:"fas fa-venus-mars"})]),t("h3",{class:"text-base font-bold text-slate-800"},"Jenis Kelamin")],-1)),(p=h.value.pegawai_per_jenis_kelamin)!=null&&p.length?(d(),i("div",$e,[(d(!0),i(Z,null,q(h.value.pegawai_per_jenis_kelamin,(r,u)=>(d(),i("div",{key:u},[t("div",De,[t("span",Ae,s(r.label),1),t("span",Ce,s(r.value),1)]),t("div",Pe,[t("div",{class:R(["h-2.5 rounded-full transition-all duration-500",r.label==="Laki-laki"?"bg-blue-500":"bg-pink-500"]),style:X({width:J(r.value,c(h.value.pegawai_per_jenis_kelamin))+"%"})},null,6)]),t("p",Se,s(J(r.value,c(h.value.pegawai_per_jenis_kelamin)))+"%",1)]))),128))])):(d(),i("div",Ie,[...e[20]||(e[20]=[t("i",{class:"fas fa-chart-bar text-2xl mb-2"},null,-1),t("p",{class:"text-sm"},"Belum ada data",-1)])]))]),t("div",Me,[e[23]||(e[23]=m('<div class="flex items-center gap-3 mb-5" data-v-8d1d0638><div class="w-8 h-8 rounded-lg bg-emerald-100 text-emerald-600 flex items-center justify-center" data-v-8d1d0638><i class="fas fa-building" data-v-8d1d0638></i></div><div data-v-8d1d0638><h3 class="text-base font-bold text-slate-800" data-v-8d1d0638>Distribusi Unit Kerja</h3><p class="text-xs text-slate-400" data-v-8d1d0638>Jumlah pegawai per unit</p></div></div>',1)),I.value.length?(d(),i("div",Le,[(d(!0),i(Z,null,q(I.value,(r,u)=>(d(),i("div",{key:u,class:"flex items-center gap-3"},[t("div",Te,[t("div",Re,[t("span",{class:"text-slate-600 truncate",title:r.nama_unit},s(r.nama_unit),9,Je),t("span",Ke,s(r.total_pegawai),1)]),t("div",Be,[t("div",{class:"bg-emerald-500 h-2 rounded-full transition-all duration-500",style:X({width:J(r.total_pegawai,F.value)+"%"})},null,4)])])]))),128))])):(d(),i("div",Ue,[...e[22]||(e[22]=[t("i",{class:"fas fa-building text-2xl mb-2"},null,-1),t("p",{class:"text-sm"},"Belum ada data unit kerja",-1)])]))])]),t("div",Ne,[t("div",Ee,[$.value.total>0?(d(),i("div",Ge,[e[27]||(e[27]=m('<div class="flex items-center gap-3 mb-5" data-v-8d1d0638><div class="w-8 h-8 rounded-lg bg-sky-100 text-sky-600 flex items-center justify-center" data-v-8d1d0638><i class="fas fa-user-shield" data-v-8d1d0638></i></div><div data-v-8d1d0638><h3 class="text-base font-bold text-slate-800" data-v-8d1d0638>Manajemen Admin</h3><p class="text-xs text-slate-400" data-v-8d1d0638>Statistik admin sistem</p></div></div>',1)),t("div",Ve,[t("div",ze,[t("p",Fe,s($.value.total),1),e[24]||(e[24]=t("p",{class:"text-xs text-sky-600 mt-1"},"Total Admin",-1))]),t("div",Ze,[t("p",qe,s($.value.aktif),1),e[25]||(e[25]=t("p",{class:"text-xs text-green-600 mt-1"},"Aktif",-1))]),t("div",Oe,[t("p",We,s($.value.non_aktif),1),e[26]||(e[26]=t("p",{class:"text-xs text-red-500 mt-1"},"Non-Aktif",-1))])])])):j("",!0),t("div",He,[e[32]||(e[32]=m('<div class="flex items-center gap-3 mb-6" data-v-8d1d0638><div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center" data-v-8d1d0638><i class="fas fa-bolt" data-v-8d1d0638></i></div><div data-v-8d1d0638><h3 class="text-lg font-bold text-slate-800" data-v-8d1d0638>Aksi Cepat</h3><p class="text-slate-500 text-sm" data-v-8d1d0638>Jalan pintas pengelolaan sistem</p></div></div>',1)),t("div",Qe,[t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-4",onClick:e[2]||(e[2]=r=>w("super-admin/data-pegawai?action=add"))},[...e[28]||(e[28]=[m('<div class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center shrink-0" data-v-8d1d0638><i class="fas fa-user-plus" data-v-8d1d0638></i></div><div data-v-8d1d0638><h4 class="font-semibold text-slate-700" data-v-8d1d0638>Tambah Pegawai</h4><p class="text-slate-500 text-xs mt-1" data-v-8d1d0638>Input data pegawai baru</p></div><i class="fas fa-chevron-right ml-auto text-slate-300" data-v-8d1d0638></i>',3)])]),t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-4",onClick:e[3]||(e[3]=r=>w("super-admin/jabatan"))},[...e[29]||(e[29]=[m('<div class="w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center shrink-0" data-v-8d1d0638><i class="fas fa-sitemap" data-v-8d1d0638></i></div><div data-v-8d1d0638><h4 class="font-semibold text-slate-700" data-v-8d1d0638>Kelola Jabatan</h4><p class="text-slate-500 text-xs mt-1" data-v-8d1d0638>Update struktur organisasi</p></div><i class="fas fa-chevron-right ml-auto text-slate-300" data-v-8d1d0638></i>',3)])]),t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-4",onClick:e[4]||(e[4]=r=>w("super-admin/unit-kerja"))},[...e[30]||(e[30]=[m('<div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center shrink-0" data-v-8d1d0638><i class="fas fa-building" data-v-8d1d0638></i></div><div data-v-8d1d0638><h4 class="font-semibold text-slate-700" data-v-8d1d0638>Unit Kerja</h4><p class="text-slate-500 text-xs mt-1" data-v-8d1d0638>Manajemen unit &amp; divisi</p></div><i class="fas fa-chevron-right ml-auto text-slate-300" data-v-8d1d0638></i>',3)])]),t("div",{class:"bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-xl p-4 cursor-pointer transition-colors flex items-center gap-4",onClick:e[5]||(e[5]=r=>w("super-admin/referensi"))},[...e[31]||(e[31]=[m('<div class="w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center shrink-0" data-v-8d1d0638><i class="fas fa-database" data-v-8d1d0638></i></div><div data-v-8d1d0638><h4 class="font-semibold text-slate-700" data-v-8d1d0638>Tabel Referensi</h4><p class="text-slate-500 text-xs mt-1" data-v-8d1d0638>Lihat data master sistem</p></div><i class="fas fa-chevron-right ml-auto text-slate-300" data-v-8d1d0638></i>',3)])])])])]),t("div",Xe,[t("div",Ye,[e[33]||(e[33]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-8 h-8 rounded-lg bg-pink-100 text-pink-600 flex items-center justify-center"},[t("i",{class:"fas fa-history"})]),t("h3",{class:"text-lg font-bold text-slate-800"},"Aktivitas")],-1)),t("button",{onClick:n,class:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",disabled:f.value},[t("i",{class:R(["fas fa-sync-alt",{"fa-spin":f.value}])},null,2)],8,ta)]),S.value.length>0?(d(),i("div",ea,[(d(!0),i(Z,null,q(S.value,(r,u)=>(d(),i("div",{key:u,class:"flex gap-4 items-start pb-4 border-b border-slate-50 last:border-0 last:pb-0"},[t("div",{class:R(["w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-sm",L(r.status)])},[t("i",{class:R(["fas",r.icon])},null,2)],2),t("div",null,[t("h5",aa,s(r.title),1),t("p",sa,s(r.description),1),t("span",la,s(r.time),1)])]))),128))])):(d(),i("div",da,[...e[34]||(e[34]=[t("i",{class:"fas fa-inbox text-3xl mb-2"},null,-1),t("p",{class:"text-sm"},"Tidak ada aktivitas terbaru",-1)])]))])])])):j("",!0)]))}}},oa=Y(ia,[["__scopeId","data-v-8d1d0638"]]);export{oa as default};
